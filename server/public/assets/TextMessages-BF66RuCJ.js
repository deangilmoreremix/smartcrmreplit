import{r as a,j as e,P as $,c as P,U as T,am as k,ar as F,aq as G,a$ as C,X as z,cy as D,aW as U,d as Y,cz as d,a as K,cA as W}from"./index-e3V0CD7Y.js";const V=()=>{const M=W,[c,u]=a.useState([{id:"1",name:"John Doe",phone:"(555) 123-4567",unread:2,lastMessage:"That sounds great! I'll check my calendar.",lastActivity:new Date("2025-06-15T14:32:00"),messages:[{id:"m1",sender:"user",content:"Hi John, are you available for a quick call this week to discuss your needs?",timestamp:new Date("2025-06-15T14:30:00"),status:"read"},{id:"m2",sender:"contact",content:"That sounds great! I'll check my calendar.",timestamp:new Date("2025-06-15T14:32:00"),status:"read"}]},{id:"2",name:"Jane Smith",phone:"(555) 987-6543",unread:0,lastMessage:"Thanks for sending the proposal. I'll review it today.",lastActivity:new Date("2025-06-14T11:15:00"),messages:[{id:"m1",sender:"user",content:"Hello Jane, I just sent over the proposal we discussed. Let me know if you have any questions!",timestamp:new Date("2025-06-14T11:10:00"),status:"read"},{id:"m2",sender:"contact",content:"Thanks for sending the proposal. I'll review it today.",timestamp:new Date("2025-06-14T11:15:00"),status:"read"}]},{id:"3",name:"Robert Johnson",phone:"(555) 456-7890",unread:0,lastMessage:"Yes, that works for me. See you then!",lastActivity:new Date("2025-06-13T16:45:00"),messages:[{id:"m1",sender:"user",content:"Hi Robert, are you available for a demo next Tuesday at 2pm?",timestamp:new Date("2025-06-13T16:40:00"),status:"read"},{id:"m2",sender:"contact",content:"Yes, that works for me. See you then!",timestamp:new Date("2025-06-13T16:45:00"),status:"read"}]}]),[l,I]=a.useState(null),[i,o]=a.useState(""),[p,y]=a.useState(!1),[j,m]=a.useState(!1),[v,N]=a.useState(!1),[g,x]=a.useState(null),[h,A]=a.useState(""),[L,B]=a.useState([{id:"template-1",name:"Follow-up",content:"Hi {name}, I wanted to follow up on our recent conversation. Do you have any questions I can answer for you?",category:"follow-up",variables:["name"]},{id:"template-2",name:"Appointment Confirmation",content:"Hi {name}, this is just a quick confirmation of our appointment on {date} at {time}. Looking forward to meeting with you!",category:"appointment",variables:["name","date","time"]},{id:"template-3",name:"New Resource",content:"Hi {name}, I thought you might find this resource helpful based on our conversation: {link}. Let me know what you think!",category:"resource",variables:["name","link"]}]),f=a.useRef(null),r=c.find(s=>s.id===l);a.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:"smooth"})},[r?.messages]);const R=s=>{I(s),u(c.map(t=>t.id===s?{...t,unread:0}:t)),m(!1),x(null)},q=c.filter(s=>s.name.toLowerCase().includes(h.toLowerCase())||s.phone.includes(h)),w=()=>{if(!l||!i.trim())return;y(!0);const s={id:`m${Date.now()}`,sender:"user",content:i,timestamp:new Date,status:"sending"};u(c.map(t=>t.id===l?{...t,messages:[...t.messages,s],lastMessage:i,lastActivity:new Date}:t)),o(""),setTimeout(()=>{u(t=>t.map(n=>n.id===l?{...n,messages:n.messages.map(b=>b.id===s.id?{...b,status:"delivered"}:b)}:n)),y(!1)},1500)},S=s=>{const t=new Date,n=new Date(t);return n.setDate(n.getDate()-1),s.toDateString()===t.toDateString()?s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):s.toDateString()===n.toDateString()?"Yesterday":s.toLocaleDateString()},E=s=>{if(r){const t=s.replace("{name}",r.name);o(t),m(!1)}},H=async()=>{if(r){N(!0),x(null);try{let t=(await M.generateEmail({recipient:r.name,purpose:"Short text message follow-up (keep it under 160 characters)",tone:"casual"})).body;t.includes(`

`)&&(t=t.split(`

`)[0]),t.toLowerCase().startsWith("subject:")&&(t=t.split(`
`).slice(1).join(`
`).trim()),x(t)}catch(s){console.error("Failed to generate text suggestion:",s)}finally{N(!1)}}},J=({status:s})=>{switch(s){case"sending":return e.jsx(K,{size:12,className:"text-gray-400"});case"sent":return e.jsx(d,{size:12,className:"text-gray-400"});case"delivered":return e.jsxs("div",{className:"flex",children:[e.jsx(d,{size:12,className:"text-gray-400"}),e.jsx(d,{size:12,className:"text-gray-400 -ml-1"})]});case"read":return e.jsxs("div",{className:"flex",children:[e.jsx(d,{size:12,className:"text-blue-500"}),e.jsx(d,{size:12,className:"text-blue-500 -ml-1"})]});case"failed":return e.jsx(Y,{size:12,className:"text-red-500"});default:return null}};return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsxs("div",{className:"w-1/3 bg-white border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Text Messages"}),e.jsx("button",{className:"p-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:e.jsx($,{size:16})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search contacts...",value:h,onChange:s=>A(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:q.map(s=>e.jsxs("div",{onClick:()=>R(s.id),className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 ${l===s.id?"bg-blue-50 border-blue-200":""}`,children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:e.jsx(T,{size:20,className:"text-gray-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.name}),s.unread>0&&e.jsx("span",{className:"bg-blue-600 text-white text-xs rounded-full px-2 py-1 ml-2",children:s.unread})]}),e.jsx("p",{className:"text-xs text-gray-500",children:s.phone}),e.jsx("p",{className:"text-sm text-gray-600 truncate mt-1",children:s.lastMessage})]})]})}),s.lastActivity&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:S(s.lastActivity)})]},s.id))})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-white flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:e.jsx(T,{size:16,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:r.name}),e.jsx("p",{className:"text-sm text-gray-500",children:r.phone})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>m(!j),className:"p-2 rounded-md bg-gray-100 hover:bg-gray-200",children:e.jsx(k,{size:16})}),e.jsx("button",{className:"p-2 rounded-md bg-gray-100 hover:bg-gray-200",children:e.jsx(F,{size:16})}),e.jsx("button",{className:"p-2 rounded-md bg-gray-100 hover:bg-gray-200",children:e.jsx(G,{size:16})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.messages.map(s=>e.jsx("div",{className:`flex ${s.sender==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${s.sender==="user"?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`,children:[e.jsx("p",{className:"text-sm",children:s.content}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("p",{className:"text-xs opacity-70",children:S(s.timestamp)}),s.sender==="user"&&e.jsx(J,{status:s.status})]})]})},s.id)),e.jsx("div",{ref:f})]}),g&&e.jsx("div",{className:"p-4 bg-blue-50 border-t border-blue-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(C,{size:16,className:"text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"AI Suggestion"})]}),e.jsx("p",{className:"text-sm text-gray-700",children:g})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>o(g),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700",children:"Use"}),e.jsx("button",{onClick:()=>x(null),className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(z,{size:12})})]})]})}),j&&e.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Message Templates"}),e.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(z,{size:16})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:L.map(s=>e.jsxs("button",{onClick:()=>E(s.content),className:"text-left p-2 bg-white rounded border border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.content})]},s.id))})]}),e.jsx("div",{className:"p-4 bg-white border-t border-gray-200",children:e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("textarea",{value:i,onChange:s=>o(s.target.value),placeholder:"Type your message...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3,onKeyPress:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),w())}})}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("button",{onClick:H,disabled:v,className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-md",children:v?e.jsx(D,{size:16,className:"animate-spin"}):e.jsx(C,{size:16})}),e.jsx("button",{onClick:w,disabled:p||!i.trim(),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md disabled:opacity-50",children:p?e.jsx(D,{size:16,className:"animate-spin"}):e.jsx(U,{size:16})})]})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(k,{size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a conversation"}),e.jsx("p",{className:"text-gray-500",children:"Choose a contact from the sidebar to start messaging"})]})})})]})};export{V as default};
