import{bx as N,bw as f,r as v,j as e,aQ as h,X as w,ch as $,cK as C}from"./index-e3V0CD7Y.js";const D=({isOpen:n,onClose:c})=>{const{deals:r,stageValues:k,totalPipelineValue:a}=N(),{isDark:s}=f(),[d,x]=v.useState("pipeline");if(!n)return null;const o=[{id:"qualification",name:"Qualification",color:"bg-blue-500"},{id:"proposal",name:"Proposal",color:"bg-purple-500"},{id:"negotiation",name:"Negotiation",color:"bg-orange-500"},{id:"closed-won",name:"Closed Won",color:"bg-green-500"},{id:"closed-lost",name:"Closed Lost",color:"bg-red-500"}],l={};o.forEach(t=>{l[t.id]={}}),Object.values(r).forEach(t=>{l[t.stage]&&(l[t.stage][t.id]=t)});const y=o.map(t=>{const g=Object.values(l[t.id]||{}),m=g.reduce((u,j)=>u+j.value,0),b=g.length,p=a>0&&t.id!=="closed-won"&&t.id!=="closed-lost"?m/a*100:0;return{...t,value:m,count:b,percentage:p}});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center overflow-y-auto",children:e.jsxs("div",{className:`relative w-full max-w-4xl mx-auto ${s?"bg-gray-900":"bg-white"} rounded-2xl shadow-xl transition-all duration-300 transform`,children:[e.jsxs("div",{className:`p-6 border-b ${s?"border-gray-700":"border-gray-200"} flex items-center justify-between`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${s?"bg-green-500/20":"bg-green-100"}`,children:e.jsx(h,{className:`h-6 w-6 ${s?"text-green-400":"text-green-600"}`})}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-semibold ${s?"text-white":"text-gray-900"}`,children:"Pipeline Dashboard"}),e.jsxs("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:[Object.keys(r).length," Deals • ",i(a)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:`p-1 rounded-lg border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx("button",{onClick:()=>x("pipeline"),className:`px-3 py-1 rounded-md text-sm ${d==="pipeline"?s?"bg-green-500/20 text-green-400":"bg-green-100 text-green-600":s?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-700"}`,children:"Pipeline"}),e.jsx("button",{onClick:()=>x("analysis"),className:`px-3 py-1 rounded-md text-sm ${d==="analysis"?s?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-600":s?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-700"}`,children:"Analysis"})]}),e.jsx("button",{onClick:c,className:`p-2 rounded-lg ${s?"hover:bg-gray-800 text-gray-400":"hover:bg-gray-100 text-gray-500"}`,children:e.jsx(w,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"p-6",children:d==="pipeline"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl ${s?"bg-gray-800":"bg-gray-50"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx($,{className:`h-5 w-5 ${s?"text-green-400":"text-green-600"}`}),e.jsx("h3",{className:`text-sm font-medium ${s?"text-white":"text-gray-900"}`,children:"Pipeline Value"})]}),e.jsx("p",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"}`,children:i(a)}),e.jsxs("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"} mt-1`,children:[Object.keys(r).length," total deals"]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s?"bg-gray-800":"bg-gray-50"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(h,{className:`h-5 w-5 ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("h3",{className:`text-sm font-medium ${s?"text-white":"text-gray-900"}`,children:"Avg Deal Size"})]}),e.jsx("p",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"}`,children:i(a/Math.max(1,Object.keys(r).length))}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"} mt-1`,children:"Based on active deals"})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s?"bg-gray-800":"bg-gray-50"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(C,{className:`h-5 w-5 ${s?"text-purple-400":"text-purple-600"}`}),e.jsx("h3",{className:`text-sm font-medium ${s?"text-white":"text-gray-900"}`,children:"Deal Velocity"})]}),e.jsx("p",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"}`,children:"28 days"}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"} mt-1`,children:"Average time to close"})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${s?"text-white":"text-gray-900"}`,children:"Pipeline Stages"}),e.jsx("div",{className:"space-y-4",children:y.map(t=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${t.color}`}),e.jsx("span",{className:`font-medium ${s?"text-white":"text-gray-900"}`,children:t.name})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:`${s?"text-gray-400":"text-gray-500"}`,children:[t.count," deals"]}),e.jsx("span",{className:`font-medium ${s?"text-white":"text-gray-900"}`,children:i(t.value)})]})]}),t.id!=="closed-won"&&t.id!=="closed-lost"&&e.jsx("div",{className:`w-full h-2 ${s?"bg-gray-700":"bg-gray-200"} rounded-full overflow-hidden`,children:e.jsx("div",{className:`h-full ${t.color} rounded-full transition-all duration-500`,style:{width:`${t.percentage}%`}})})]},t.id))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{className:`px-4 py-2 rounded-lg border ${s?"border-gray-700 hover:bg-gray-800 text-white":"border-gray-300 hover:bg-gray-100 text-gray-700"}`,onClick:c,children:"Close"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg",onClick:()=>window.location.href="/pipeline",children:"Full Pipeline View"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${s?"text-white":"text-gray-900"}`,children:"Pipeline Analysis"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`w-full h-60 ${s?"bg-gray-700":"bg-gray-100"} rounded-lg flex items-center justify-center`,children:e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:"Pipeline analysis visualization"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:`p-4 rounded-lg border ${s?"border-gray-700 bg-gray-800/50":"border-gray-200 bg-gray-50"}`,children:[e.jsx("h4",{className:`text-sm font-medium mb-2 ${s?"text-white":"text-gray-900"}`,children:"Conversion Rates"}),e.jsxs("ul",{className:`space-y-2 text-sm ${s?"text-gray-300":"text-gray-600"}`,children:[e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"Qualification → Proposal"}),e.jsx("span",{className:"font-medium",children:"64%"})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"Proposal → Negotiation"}),e.jsx("span",{className:"font-medium",children:"58%"})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"Negotiation → Closed"}),e.jsx("span",{className:"font-medium",children:"72%"})]})]})]}),e.jsxs("div",{className:`p-4 rounded-lg border ${s?"border-gray-700 bg-gray-800/50":"border-gray-200 bg-gray-50"}`,children:[e.jsx("h4",{className:`text-sm font-medium mb-2 ${s?"text-white":"text-gray-900"}`,children:"Insights"}),e.jsxs("ul",{className:`space-y-2 text-sm ${s?"text-gray-300":"text-gray-600"}`,children:[e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:"3 deals stalled in negotiation stage"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:"2 high-value opportunities need attention"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:"Pipeline velocity increased by 15% this month"})]})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{className:`px-4 py-2 rounded-lg border ${s?"border-gray-700 hover:bg-gray-800 text-white":"border-gray-300 hover:bg-gray-100 text-gray-700"}`,onClick:c,children:"Close"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",onClick:()=>window.location.href="/analytics",children:"Full Analysis"})]})]})})]})})};function i(n){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(n)}export{D as default};
