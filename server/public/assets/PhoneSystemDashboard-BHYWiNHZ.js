import{bw as ls,r as a,j as e,af as ts,ag as rs,ah as D,ai as M,ab as o,ac as m,ar as v,ad as x,aj as R,aU as k,aP as cs,a6 as t,bg as je,b9 as ge,bb as is,am as ns,b3 as ds,b7 as O,b5 as pe,aQ as os,aX as ms,bM as Ne,b8 as xs,aq as ve,bf as K,b0 as fe,di as hs,d as us,be as js,dj as gs,bN as ps,cI as Ns}from"./index-e3V0CD7Y.js";import{I as be}from"./input-CBb2iGdE.js";import{L as c}from"./label-D929QgCh.js";import{T as ye}from"./textarea-Dn_UEKqi.js";import{S as f,a as b,b as y,c as C,d as r}from"./select-D9Wy1FBy.js";import{D as J,a as X,b as Ce,c as we}from"./dialog-CFFKOlnO.js";import{P as W}from"./progress-LGgqPC0t.js";import{u as Se}from"./useQuery-BS2P2qdM.js";import{C as vs,g as fs}from"./gpt5CommunicationService-LRMAonUn.js";import{G as n}from"./GlassCard-CVEK9RrK.js";import{H as bs}from"./headphones-6N5U_KlV.js";import{V as ys}from"./volume-x-D_9UCciv.js";function Ls(){const{isDark:Cs}=ls(),[ke,Ae]=a.useState("calls"),[Te,P]=a.useState(!1),[i,Y]=a.useState(null),[F,Ie]=a.useState(!1),[$,Z]=a.useState(0),[De,ws]=a.useState(""),[_,ee]=a.useState(!1),[Me,Re]=a.useState("sales"),[Pe,Ve]=a.useState("price"),[ze,Ee]=a.useState("automatic"),[Oe,Fe]=a.useState("realtime"),[$e,Le]=a.useState("enabled"),[qe,He]=a.useState("transcribe"),[p,se]=a.useState(!1),[L,Be]=a.useState(!1),[V,Q]=a.useState(!1),[q,Ge]=a.useState(!0),[j,A]=a.useState("idle"),[ae,Qe]=a.useState(""),[g,T]=a.useState(""),[Ss,le]=a.useState(null),[U,Ue]=a.useState([]),[H,te]=a.useState(""),[re,ce]=a.useState(""),[B,ie]=a.useState(""),z=a.useRef(null),w=a.useRef(null),h=a.useRef(null),E=a.useRef(null),ne=a.useRef(null),G=a.useRef(null),de=[{id:"1",caller:"+1 (555) 123-4567",duration:245,status:"completed",sentiment:"positive",transcript:"Customer called about product demo scheduling...",gpt5Analysis:{summary:"Customer interested in enterprise solution",keyPoints:["Needs demo next week","Budget approved","Decision maker"],actionItems:["Schedule demo call","Send proposal","Follow up in 3 days"],sentimentScore:.85}},{id:"2",caller:"+1 (555) 987-6543",duration:0,status:"missed",sentiment:"neutral"},{id:"3",caller:"+1 (555) 456-7890",duration:180,status:"completed",sentiment:"negative",transcript:"Customer unhappy with recent service...",gpt5Analysis:{summary:"Service complaint requiring immediate attention",keyPoints:["Billing issue","Poor customer service","Threatening to cancel"],actionItems:["Contact customer today","Resolve billing issue","Offer compensation"],sentimentScore:.25}}],Ke={totalCalls:247,answeredCalls:189,averageCallDuration:4.2,callQuality:.94,customerSatisfaction:.87,aiAccuracy:.91},{data:Je=de,isLoading:ks}=Se({queryKey:["/api/phone/calls"],refetchInterval:3e4}),{data:u=Ke,isLoading:As}=Se({queryKey:["/api/phone/stats"],refetchInterval:3e4}),Xe=async s=>{if(s.transcript){ee(!0);try{const l=await fs.analyzeContent(s.transcript,"call-transcript");console.log("Call analysis:",l)}catch(l){console.error("Failed to analyze call:",l)}finally{ee(!1)}}},oe=s=>{switch(s){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200";case"ongoing":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200";case"missed":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200";case"voicemail":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}},me=s=>{switch(s){case"positive":return"bg-green-100 text-green-800";case"neutral":return"bg-yellow-100 text-yellow-800";case"negative":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},xe=async()=>{try{const s=await navigator.mediaDevices.enumerateDevices();Ue(s);const l=s.filter(S=>S.kind==="audioinput"),d=s.filter(S=>S.kind==="audiooutput"),N=s.filter(S=>S.kind==="videoinput");l.length>0&&!H&&te(l[0].deviceId),d.length>0&&!re&&ce(d[0].deviceId),N.length>0&&!B&&ie(N[0].deviceId)}catch(s){console.error("Error initializing media devices:",s)}},he=async(s=!0,l=!1)=>{try{const d={audio:s?{deviceId:H?{exact:H}:void 0}:!1,video:l?{deviceId:B?{exact:B}:void 0}:!1},N=await navigator.mediaDevices.getUserMedia(d);return E.current=N,z.current&&l&&(z.current.srcObject=N),N}catch(d){throw console.error("Error accessing media devices:",d),d}},We=()=>{const s={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};h.current=new RTCPeerConnection(s),h.current.onicecandidate=l=>{l.candidate&&console.log("ICE candidate:",l.candidate)},h.current.ontrack=l=>{ne.current=l.streams[0],w.current&&(w.current.srcObject=l.streams[0])},h.current.onconnectionstatechange=()=>{console.log("Connection state:",h.current?.connectionState),h.current?.connectionState==="connected"&&(A("connected"),le(new Date),es())}},I=async(s,l=!1)=>{try{A("connecting"),Qe(s),Q(l);const d=await he(!0,l);We(),d.getTracks().forEach(S=>{h.current?.addTrack(S,d)});const N=await h.current.createOffer();await h.current.setLocalDescription(N),console.log("Call offer created:",N),se(!0),A("ringing")}catch(d){console.error("Error starting call:",d),A("idle"),alert("Failed to start call. Please check your microphone/camera permissions.")}},ue=()=>{E.current?.getTracks().forEach(s=>s.stop()),ne.current?.getTracks().forEach(s=>s.stop()),h.current?.close(),se(!1),A("ended"),Z(0),le(null),z.current&&(z.current.srcObject=null),w.current&&(w.current.srcObject=null),G.current&&(clearInterval(G.current),G.current=null),setTimeout(()=>A("idle"),2e3)},Ye=()=>{E.current&&(E.current.getAudioTracks().forEach(l=>{l.enabled=L}),Be(!L))},Ze=async()=>{if(p)try{if(V)E.current?.getVideoTracks().forEach(s=>s.stop()),Q(!1);else{const s=await he(!1,!0);s.getVideoTracks().forEach(l=>{h.current?.addTrack(l,s)}),Q(!0)}}catch(s){console.error("Error toggling video:",s)}},_e=()=>{w.current&&(w.current.muted=q,Ge(!q))},es=()=>{G.current=setInterval(()=>{Z(s=>s+1)},1e3)};a.useEffect(()=>{xe()},[]),a.useEffect(()=>()=>{ue()},[]);const ss=[e.jsxs(t,{onClick:()=>P(!0),className:"bg-green-600 hover:bg-green-700",disabled:p,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Make Call"]},"new-call"),e.jsxs(t,{onClick:()=>P(!0),className:"bg-blue-600 hover:bg-blue-700",disabled:p,children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Video Call"]},"video-call"),e.jsxs(t,{variant:"outline",onClick:()=>Xe(de[0]),disabled:_,children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),_?"Analyzing...":"AI Analysis"]},"ai-analysis")],as=e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:u.totalCalls}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Calls"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(u.answeredCalls/u.totalCalls*100),"%"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Answer Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[u.averageCallDuration,"m"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Duration"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(u.customerSatisfaction*100),"%"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Satisfaction"})]})]});return e.jsxs(vs,{appName:"AI Voice Communication Center",appDescription:"Advanced phone system with AI-powered call analysis, real-time transcription, and intelligent routing",actionButtons:ss,headerStats:as,children:[e.jsxs(ts,{value:ke,onValueChange:Ae,className:"space-y-6",children:[e.jsxs(rs,{className:"grid w-full grid-cols-6",children:[e.jsx(D,{value:"calls",children:"Call History"}),e.jsx(D,{value:"live",children:"Live Calls"}),e.jsx(D,{value:"dialer",children:"Dialer"}),e.jsx(D,{value:"analytics",children:"Analytics"}),e.jsx(D,{value:"ai-tools",children:"AI Tools"}),e.jsx(D,{value:"settings",children:"Settings"})]}),e.jsx(M,{value:"calls",className:"space-y-6",children:e.jsxs(n,{className:"p-6",children:[e.jsx(o,{className:"px-0 pt-0",children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Recent Calls"]})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsx("div",{className:"space-y-4",children:Je.map(s=>e.jsx(n,{className:"p-4 cursor-pointer hover:border-blue-300",onClick:()=>Y(s),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${s.status==="completed"?"bg-green-100":s.status==="missed"?"bg-red-100":s.status==="ongoing"?"bg-blue-100":"bg-yellow-100"}`,children:e.jsx(v,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.caller}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.duration>0?`${Math.floor(s.duration/60)}:${(s.duration%60).toString().padStart(2,"0")}`:"No answer"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:oe(s.status),children:s.status}),s.sentiment&&e.jsx(R,{className:me(s.sentiment),children:s.sentiment}),s.gpt5Analysis&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-xs text-purple-600",children:"AI"})]})]})]})},s.id))})})]})}),e.jsx(M,{value:"live",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(n,{className:"p-6",children:[e.jsx(o,{className:"px-0 pt-0",children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-5 w-5"}),"Active Call"]})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("div",{className:"text-6xl font-bold text-blue-600 mb-2",children:[Math.floor($/60),":",($%60).toString().padStart(2,"0")]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"+1 (555) 123-4567"}),e.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[e.jsx(t,{size:"lg",variant:F?"destructive":"outline",onClick:()=>Ie(!F),children:F?e.jsx(je,{className:"h-5 w-5"}):e.jsx(ge,{className:"h-5 w-5"})}),e.jsx(t,{size:"lg",variant:"outline",children:e.jsx(is,{className:"h-5 w-5"})}),e.jsx(t,{size:"lg",className:"bg-red-600 hover:bg-red-700",children:e.jsx(je,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"text-sm text-gray-500",children:F?"Recording active":"Recording paused"})]})})]}),e.jsxs(n,{className:"p-6",children:[e.jsx(o,{className:"px-0 pt-0",children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-5 w-5"}),"Live Transcript"]})}),e.jsxs(x,{className:"px-0 pb-0",children:[e.jsx("div",{className:"h-64 bg-gray-50 dark:bg-gray-800 rounded-lg p-4 overflow-y-auto",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("div",{className:"text-blue-600 font-medium",children:"Caller:"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:De||"Transcript will appear here during live calls..."})]})}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs(t,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),"AI Summary"]}),e.jsxs(t,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(ds,{className:"h-4 w-4 mr-1"}),"Action Items"]})]})]})]})]})}),e.jsx(M,{value:"dialer",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(n,{className:"p-6",children:[e.jsx(o,{className:"px-0 pt-0",children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Quick Dial"]})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"quick-dial",children:"Phone Number"}),e.jsx(be,{id:"quick-dial",value:g,onChange:s=>T(s.target.value),placeholder:"Enter phone number...",className:"text-center text-lg"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3,4,5,6,7,8,9,"*",0,"#"].map(s=>e.jsx(t,{variant:"outline",className:"h-12 text-lg font-semibold",onClick:()=>T(l=>l+s.toString()),children:s},s))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(t,{onClick:()=>I(g,!1),disabled:!g.trim()||p,className:"flex-1 bg-green-600 hover:bg-green-700",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Call"]}),e.jsxs(t,{onClick:()=>I(g,!0),disabled:!g.trim()||p,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Video Call"]})]}),e.jsx(t,{variant:"ghost",onClick:()=>T(""),className:"w-full text-red-600 hover:text-red-700",children:"Clear Number"})]})})]}),e.jsxs(n,{className:"p-6",children:[e.jsx(o,{className:"px-0 pt-0",children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5"}),"Recent Contacts"]})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsx("div",{className:"space-y-3",children:[{name:"John Smith",number:"+1 (555) 123-4567",type:"Client"},{name:"Sarah Johnson",number:"+1 (555) 987-6543",type:"Lead"},{name:"Mike Davis",number:"+1 (555) 456-7890",type:"Partner"}].map((s,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.number}),e.jsx(R,{variant:"outline",className:"text-xs mt-1",children:s.type})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{size:"sm",variant:"outline",onClick:()=>I(s.number,!1),disabled:p,children:e.jsx(v,{className:"h-4 w-4"})}),e.jsx(t,{size:"sm",variant:"outline",onClick:()=>I(s.number,!0),disabled:p,children:e.jsx(O,{className:"h-4 w-4"})})]})]},l))})})]})]})}),e.jsx(M,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(n,{className:"p-6",children:[e.jsx(o,{className:"px-0 pt-0",children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(os,{className:"h-5 w-5"}),"Call Performance"]})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Call Quality Score"}),e.jsxs("span",{className:"font-semibold",children:[Math.round(u.callQuality*100),"%"]})]}),e.jsx(W,{value:u.callQuality*100,className:"h-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"AI Analysis Accuracy"}),e.jsxs("span",{className:"font-semibold",children:[Math.round(u.aiAccuracy*100),"%"]})]}),e.jsx(W,{value:u.aiAccuracy*100,className:"h-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Customer Satisfaction"}),e.jsxs("span",{className:"font-semibold",children:[Math.round(u.customerSatisfaction*100),"%"]})]}),e.jsx(W,{value:u.customerSatisfaction*100,className:"h-2"})]})})]}),e.jsxs(n,{className:"p-6",children:[e.jsx(o,{className:"px-0 pt-0",children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"h-5 w-5"}),"Call Trends"]})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Peak Call Hours"}),e.jsx("span",{className:"font-semibold",children:"9 AM - 11 AM"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Busiest Day"}),e.jsx("span",{className:"font-semibold",children:"Wednesday"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Avg Handle Time"}),e.jsx("span",{className:"font-semibold",children:"4.2 min"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"First Call Resolution"}),e.jsx("span",{className:"font-semibold",children:"78%"})]})]})})]})]})}),e.jsx(M,{value:"ai-tools",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(n,{className:"p-6",children:[e.jsx(o,{className:"px-0 pt-0",children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5"}),"Call Script Generator"]})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"call-purpose",children:"Call Purpose"}),e.jsxs(f,{value:Me,onValueChange:Re,children:[e.jsx(b,{children:e.jsx(y,{})}),e.jsxs(C,{children:[e.jsx(r,{value:"sales",children:"Sales Call"}),e.jsx(r,{value:"support",children:"Support Call"}),e.jsx(r,{value:"followup",children:"Follow-up Call"}),e.jsx(r,{value:"survey",children:"Customer Survey"})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"prospect-info",children:"Prospect Information"}),e.jsx(ye,{id:"prospect-info",placeholder:"Enter prospect details, previous interactions, etc.",rows:4})]}),e.jsxs(t,{className:"w-full",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Generate Call Script"]})]})})]}),e.jsxs(n,{className:"p-6",children:[e.jsx(o,{className:"px-0 pt-0",children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),"Objection Handler"]})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"objection",children:"Common Objection"}),e.jsxs(f,{value:Pe,onValueChange:Ve,children:[e.jsx(b,{children:e.jsx(y,{})}),e.jsxs(C,{children:[e.jsx(r,{value:"price",children:"Price Too High"}),e.jsx(r,{value:"competition",children:"Using Competitor"}),e.jsx(r,{value:"timing",children:"Not Right Time"}),e.jsx(r,{value:"features",children:"Missing Features"})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"context",children:"Call Context"}),e.jsx(ye,{id:"context",placeholder:"Describe the current call situation...",rows:3})]}),e.jsxs(t,{className:"w-full",variant:"outline",children:[e.jsx(xs,{className:"h-4 w-4 mr-2"}),"Generate Response"]})]})})]})]})}),e.jsxs(M,{value:"settings",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n,{className:"p-6",children:[e.jsx(o,{className:"px-0 pt-0",children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5"}),"Audio & Video Devices"]})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Microphone"]}),e.jsxs(f,{value:H,onValueChange:te,children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Select microphone"})}),e.jsx(C,{children:U.filter(s=>s.kind==="audioinput").map(s=>e.jsx(r,{value:s.deviceId,children:s.label||`Microphone ${s.deviceId.slice(0,8)}`},s.deviceId))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4"}),"Speaker"]}),e.jsxs(f,{value:re,onValueChange:ce,children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Select speaker"})}),e.jsx(C,{children:U.filter(s=>s.kind==="audiooutput").map(s=>e.jsx(r,{value:s.deviceId,children:s.label||`Speaker ${s.deviceId.slice(0,8)}`},s.deviceId))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Camera"]}),e.jsxs(f,{value:B,onValueChange:ie,children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Select camera"})}),e.jsx(C,{children:U.filter(s=>s.kind==="videoinput").map(s=>e.jsx(r,{value:s.deviceId,children:s.label||`Camera ${s.deviceId.slice(0,8)}`},s.deviceId))})]})]}),e.jsxs(t,{onClick:xe,variant:"outline",className:"w-full",children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Refresh Devices"]})]})})]}),e.jsxs(n,{className:"p-6",children:[e.jsx(o,{className:"px-0 pt-0",children:e.jsx(m,{children:"Call Settings"})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Call Recording"}),e.jsxs(f,{value:ze,onValueChange:Ee,children:[e.jsx(b,{children:e.jsx(y,{})}),e.jsxs(C,{children:[e.jsx(r,{value:"automatic",children:"Automatic"}),e.jsx(r,{value:"manual",children:"Manual"}),e.jsx(r,{value:"disabled",children:"Disabled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Transcription"}),e.jsxs(f,{value:Oe,onValueChange:Fe,children:[e.jsx(b,{children:e.jsx(y,{})}),e.jsxs(C,{children:[e.jsx(r,{value:"realtime",children:"Real-time"}),e.jsx(r,{value:"postcall",children:"Post-Call"}),e.jsx(r,{value:"disabled",children:"Disabled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"AI Analysis"}),e.jsxs(f,{value:$e,onValueChange:Le,children:[e.jsx(b,{children:e.jsx(y,{})}),e.jsxs(C,{children:[e.jsx(r,{value:"enabled",children:"Enabled"}),e.jsx(r,{value:"disabled",children:"Disabled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Voicemail"}),e.jsxs(f,{value:qe,onValueChange:He,children:[e.jsx(b,{children:e.jsx(y,{})}),e.jsxs(C,{children:[e.jsx(r,{value:"transcribe",children:"Transcribe & Analyze"}),e.jsx(r,{value:"record",children:"Record Only"}),e.jsx(r,{value:"disabled",children:"Disabled"})]})]})]})]})})]})]}),e.jsxs(n,{className:"p-6",children:[e.jsx(o,{className:"px-0 pt-0",children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),"Permissions & Security"]})}),e.jsxs(x,{className:"px-0 pb-0",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(K,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),e.jsx("div",{className:"font-medium",children:"Microphone"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:navigator.mediaDevices?"Granted":"Not Available"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(fe,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),e.jsx("div",{className:"font-medium",children:"Camera"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:navigator.mediaDevices?"Granted":"Not Available"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(hs,{className:"h-8 w-8 mx-auto mb-2 text-purple-600"}),e.jsx("div",{className:"font-medium",children:"Screen Share"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Available"})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(us,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Browser Permissions Required"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-200 mb-3",children:"To use calling features, please ensure your browser has permission to access your microphone and camera."}),e.jsx(t,{variant:"outline",size:"sm",children:"Check Permissions"})]})]})})]})]})]})]}),e.jsx(J,{open:Te,onOpenChange:P,children:e.jsxs(X,{className:"max-w-md",children:[e.jsx(Ce,{children:e.jsxs(we,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Make a Call"]})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"phone-number",children:"Phone Number"}),e.jsx(be,{id:"phone-number",value:g,onChange:s=>T(s.target.value),placeholder:"+1 (555) 123-4567",className:"text-center text-lg font-mono"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3,4,5,6,7,8,9,"*",0,"#"].map(s=>e.jsx(t,{variant:"outline",className:"h-12 text-lg font-semibold",onClick:()=>T(l=>l+s.toString()),children:s},s))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(t,{onClick:()=>{I(g,!1),P(!1)},disabled:!g.trim(),className:"flex-1 bg-green-600 hover:bg-green-700",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Voice Call"]}),e.jsxs(t,{onClick:()=>{I(g,!0),P(!1)},disabled:!g.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Video Call"]})]}),e.jsx("div",{className:"text-center",children:e.jsx(t,{variant:"ghost",onClick:()=>T(""),className:"text-red-600 hover:text-red-700",children:"Clear"})})]})]})}),p&&e.jsx(J,{open:p,onOpenChange:()=>{},children:e.jsx(X,{className:"max-w-4xl max-h-[90vh] overflow-hidden",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-4xl font-bold mb-2 ${j==="connected"?"text-green-600":j==="connecting"?"text-yellow-600":j==="ringing"?"text-blue-600":"text-gray-600"}`,children:j==="connected"?`${Math.floor($/60)}:${($%60).toString().padStart(2,"0")}`:j==="connecting"?"Connecting...":j==="ringing"?"Ringing...":"Call Ended"}),e.jsx("div",{className:"text-lg text-gray-600 dark:text-gray-400",children:ae}),e.jsx(R,{className:`mt-2 ${j==="connected"?"bg-green-100 text-green-800":j==="connecting"?"bg-yellow-100 text-yellow-800":j==="ringing"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:j})]}),V&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-sm",children:"You"}),e.jsx("div",{className:"aspect-video bg-gray-900 rounded-lg overflow-hidden",children:e.jsx("video",{ref:z,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-sm",children:ae}),e.jsx("div",{className:"aspect-video bg-gray-900 rounded-lg overflow-hidden",children:e.jsx("video",{ref:w,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"})})]})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(t,{onClick:Ye,variant:L?"destructive":"outline",size:"lg",className:"w-16 h-16 rounded-full",children:L?e.jsx(js,{className:"h-6 w-6"}):e.jsx(K,{className:"h-6 w-6"})}),V&&e.jsx(t,{onClick:Ze,variant:V?"outline":"destructive",size:"lg",className:"w-16 h-16 rounded-full",children:V?e.jsx(O,{className:"h-6 w-6"}):e.jsx(gs,{className:"h-6 w-6"})}),e.jsx(t,{onClick:_e,variant:q?"outline":"destructive",size:"lg",className:"w-16 h-16 rounded-full",children:q?e.jsx(ps,{className:"h-6 w-6"}):e.jsx(ys,{className:"h-6 w-6"})}),e.jsx(t,{onClick:ue,variant:"destructive",size:"lg",className:"w-16 h-16 rounded-full bg-red-600 hover:bg-red-700",children:e.jsx(Ns,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(t,{variant:"outline",size:"sm",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Record"]}),e.jsxs(t,{variant:"outline",size:"sm",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"AI Notes"]}),e.jsxs(t,{variant:"outline",size:"sm",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Transfer"]})]})]})})}),i&&e.jsx(J,{open:!!i,onOpenChange:()=>Y(null),children:e.jsxs(X,{className:"max-w-2xl",children:[e.jsx(Ce,{children:e.jsxs(we,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Call Details"]})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Caller"}),e.jsx("div",{className:"font-medium",children:i.caller})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Duration"}),e.jsx("div",{className:"font-medium",children:i.duration>0?`${Math.floor(i.duration/60)}:${(i.duration%60).toString().padStart(2,"0")}`:"No answer"})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Status"}),e.jsx(R,{className:oe(i.status),children:i.status})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Sentiment"}),i.sentiment&&e.jsx(R,{className:me(i.sentiment),children:i.sentiment})]})]}),i.transcript&&e.jsxs("div",{children:[e.jsx(c,{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Transcript"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg max-h-40 overflow-y-auto",children:e.jsx("p",{className:"text-sm",children:i.transcript})})]}),i.gpt5Analysis&&e.jsxs("div",{children:[e.jsxs(c,{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4 text-purple-500"}),"AI Analysis"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm mb-1",children:"Summary"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:i.gpt5Analysis.summary})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm mb-1",children:"Key Points"}),e.jsx("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:i.gpt5Analysis.keyPoints.map((s,l)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-500 mt-1",children:"•"}),s]},l))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm mb-1",children:"Action Items"}),e.jsx("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:i.gpt5Analysis.actionItems.map((s,l)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-500 mt-1",children:"•"}),s]},l))})]})]})]})]})]})})]})}export{Ls as default};
