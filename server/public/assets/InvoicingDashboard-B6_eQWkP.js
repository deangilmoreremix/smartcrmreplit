import{bw as ee,r as i,j as e,af as se,ag as ae,ah as p,ai as g,ab as r,ac as d,ae as m,ad as x,aj as D,aU as v,aQ as te,aX as le,a6 as y,b3 as T,P as ne}from"./index-e3V0CD7Y.js";import{I as A}from"./input-CBb2iGdE.js";import{L as t}from"./label-D929QgCh.js";import{S as o,a as h,b as u,c as j,d as s}from"./select-D9Wy1FBy.js";import{D as ie,a as ce,b as re,c as de}from"./dialog-CFFKOlnO.js";import{u as z}from"./useQuery-BS2P2qdM.js";import{C as me,g as xe}from"./gpt5CommunicationService-LRMAonUn.js";import{G as c}from"./GlassCard-CVEK9RrK.js";function Ie(){const{isDark:oe}=ee(),[O,P]=i.useState("invoices"),[he,F]=i.useState(!1),[l,b]=i.useState(null),[N,f]=i.useState(!1),[C,$]=i.useState(null),[V,R]=i.useState("technology"),[L,M]=i.useState("30"),[B,E]=i.useState("usd"),[G,q]=i.useState("net30"),[U,H]=i.useState("enabled"),[K,Q]=i.useState("percentage"),J=[{id:"1",invoiceNumber:"INV-2024-001",clientName:"Acme Corporation",clientEmail:"billing@acme.com",amount:2500,status:"paid",dueDate:"2024-01-15",createdDate:"2024-01-01",items:[{id:"1",description:"Consulting Services",quantity:20,rate:125,amount:2500}],gpt5Optimization:{suggestedAmount:2750,confidence:.85,reasoning:"Based on market rates and client history"}},{id:"2",invoiceNumber:"INV-2024-002",clientName:"TechStart Inc",clientEmail:"finance@techstart.com",amount:1800,status:"sent",dueDate:"2024-01-20",createdDate:"2024-01-05",items:[{id:"1",description:"Development Services",quantity:15,rate:120,amount:1800}]},{id:"3",invoiceNumber:"INV-2024-003",clientName:"Global Solutions",clientEmail:"accounts@global.com",amount:3200,status:"overdue",dueDate:"2024-01-10",createdDate:"2024-01-01",items:[{id:"1",description:"Project Management",quantity:25,rate:128,amount:3200}]}],X={totalRevenue:45200,pendingInvoices:8,paidInvoices:23,overdueInvoices:3,averageInvoiceValue:2150,collectionRate:.89,monthlyGrowth:.15},{data:W=J,isLoading:ue}=z({queryKey:["/api/invoices"],refetchInterval:3e4}),{data:n=X,isLoading:je}=z({queryKey:["/api/invoices/stats"],refetchInterval:3e4}),I=async(a,_)=>{f(!0);try{const S=(await xe.optimizeContent(`Base amount: $${a}, Client: ${JSON.stringify(_)}`,"pricing-optimization")).optimizedContent.match(/\$?(\d+(?:\.\d{2})?)/);S&&$(parseFloat(S[1]))}catch(k){console.error("Failed to optimize invoice amount:",k)}finally{f(!1)}},w=a=>{switch(a){case"paid":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200";case"sent":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200";case"draft":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200";case"overdue":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200";case"cancelled":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}},Y=[e.jsxs(y,{onClick:()=>F(!0),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Create Invoice"]},"create-invoice"),e.jsxs(y,{variant:"outline",onClick:()=>I(2e3,{industry:"technology",size:"enterprise"}),disabled:N,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),N?"Optimizing...":"AI Price Optimizer"]},"ai-optimize")],Z=e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["$",n.totalRevenue.toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.paidInvoices}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Paid Invoices"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:n.pendingInvoices}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:n.overdueInvoices}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overdue"})]})]});return e.jsxs(me,{appName:"Smart Billing Intelligence",appDescription:"AI-powered invoicing with automated pricing optimization, payment tracking, and intelligent collection management",actionButtons:Y,headerStats:Z,children:[e.jsxs(se,{value:O,onValueChange:P,className:"space-y-6",children:[e.jsxs(ae,{className:"grid w-full grid-cols-5",children:[e.jsx(p,{value:"invoices",children:"Invoices"}),e.jsx(p,{value:"analytics",children:"Analytics"}),e.jsx(p,{value:"ai-tools",children:"AI Tools"}),e.jsx(p,{value:"templates",children:"Templates"}),e.jsx(p,{value:"settings",children:"Settings"})]}),e.jsx(g,{value:"invoices",className:"space-y-6",children:e.jsxs(c,{className:"p-6",children:[e.jsx(r,{className:"px-0 pt-0",children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5"}),"Recent Invoices"]})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsx("div",{className:"space-y-4",children:W.map(a=>e.jsx(c,{className:"p-4 cursor-pointer hover:border-blue-300",onClick:()=>b(a),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${a.status==="paid"?"bg-green-100":a.status==="sent"?"bg-blue-100":a.status==="overdue"?"bg-red-100":"bg-yellow-100"}`,children:e.jsx(m,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.invoiceNumber}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.clientName})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:w(a.status),children:a.status}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold",children:["$",a.amount.toFixed(2)]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Due: ",new Date(a.dueDate).toLocaleDateString()]})]}),a.gpt5Optimization&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-xs text-purple-600",children:"AI"})]})]})]})},a.id))})})]})}),e.jsx(g,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(c,{className:"p-6",children:[e.jsx(r,{className:"px-0 pt-0",children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),"Revenue Analytics"]})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Revenue"}),e.jsxs("span",{className:"font-semibold",children:["$",n.totalRevenue.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Average Invoice Value"}),e.jsxs("span",{className:"font-semibold",children:["$",n.averageInvoiceValue.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Collection Rate"}),e.jsxs("span",{className:"font-semibold",children:[Math.round(n.collectionRate*100),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Monthly Growth"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["+",Math.round(n.monthlyGrowth*100),"%"]})]})]})})]}),e.jsxs(c,{className:"p-6",children:[e.jsx(r,{className:"px-0 pt-0",children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5"}),"Payment Trends"]})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Paid This Month"}),e.jsx("span",{className:"font-semibold text-green-600",children:n.paidInvoices})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Pending Payment"}),e.jsx("span",{className:"font-semibold text-yellow-600",children:n.pendingInvoices})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Overdue"}),e.jsx("span",{className:"font-semibold text-red-600",children:n.overdueInvoices})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Average Payment Time"}),e.jsx("span",{className:"font-semibold",children:"12 days"})]})]})})]})]})}),e.jsx(g,{value:"ai-tools",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(c,{className:"p-6",children:[e.jsx(r,{className:"px-0 pt-0",children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Price Optimization"]})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"base-amount",children:"Base Amount"}),e.jsx(A,{id:"base-amount",type:"number",placeholder:"Enter base amount",defaultValue:"2000"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"client-industry",children:"Client Industry"}),e.jsxs(o,{value:V,onValueChange:R,children:[e.jsx(h,{children:e.jsx(u,{})}),e.jsxs(j,{children:[e.jsx(s,{value:"technology",children:"Technology"}),e.jsx(s,{value:"consulting",children:"Consulting"}),e.jsx(s,{value:"marketing",children:"Marketing"}),e.jsx(s,{value:"finance",children:"Finance"}),e.jsx(s,{value:"healthcare",children:"Healthcare"})]})]})]}),e.jsxs(y,{className:"w-full",onClick:()=>I(2e3,{industry:"technology"}),disabled:N,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),N?"Optimizing...":"Optimize Price"]}),C&&e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("div",{className:"text-sm text-green-800 dark:text-green-200",children:["Suggested Amount: ",e.jsxs("span",{className:"font-bold",children:["$",C.toFixed(2)]})]})})]})})]}),e.jsxs(c,{className:"p-6",children:[e.jsx(r,{className:"px-0 pt-0",children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Collection Assistant"]})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"overdue-amount",children:"Overdue Amount"}),e.jsx(A,{id:"overdue-amount",type:"number",placeholder:"Enter overdue amount"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"days-overdue",children:"Days Overdue"}),e.jsxs(o,{value:L,onValueChange:M,children:[e.jsx(h,{children:e.jsx(u,{})}),e.jsxs(j,{children:[e.jsx(s,{value:"7",children:"7 days"}),e.jsx(s,{value:"15",children:"15 days"}),e.jsx(s,{value:"30",children:"30 days"}),e.jsx(s,{value:"60",children:"60 days"}),e.jsx(s,{value:"90",children:"90+ days"})]})]})]}),e.jsxs(y,{className:"w-full",variant:"outline",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Generate Collection Strategy"]})]})})]})]})}),e.jsx(g,{value:"templates",className:"space-y-6",children:e.jsxs(c,{className:"p-6",children:[e.jsx(r,{className:"px-0 pt-0",children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5"}),"Invoice Templates"]})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(c,{variant:"elevated",className:"p-4 cursor-pointer hover:bg-blue-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(m,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),e.jsx("h3",{className:"font-medium",children:"Professional"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Clean, corporate design"})]})}),e.jsx(c,{variant:"elevated",className:"p-4 cursor-pointer hover:bg-green-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(m,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),e.jsx("h3",{className:"font-medium",children:"Modern"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Contemporary styling"})]})}),e.jsx(c,{variant:"elevated",className:"p-4 cursor-pointer hover:bg-purple-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(m,{className:"h-8 w-8 mx-auto mb-2 text-purple-600"}),e.jsx("h3",{className:"font-medium",children:"Creative"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Bold, artistic design"})]})})]})})]})}),e.jsx(g,{value:"settings",className:"space-y-6",children:e.jsxs(c,{className:"p-6",children:[e.jsx(r,{className:"px-0 pt-0",children:e.jsx(d,{children:"Invoicing Settings"})}),e.jsx(x,{className:"px-0 pb-0",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Default Currency"}),e.jsxs(o,{value:B,onValueChange:E,children:[e.jsx(h,{children:e.jsx(u,{})}),e.jsxs(j,{children:[e.jsx(s,{value:"usd",children:"USD ($)"}),e.jsx(s,{value:"eur",children:"EUR (€)"}),e.jsx(s,{value:"gbp",children:"GBP (£)"}),e.jsx(s,{value:"cad",children:"CAD (C$)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Payment Terms"}),e.jsxs(o,{value:G,onValueChange:q,children:[e.jsx(h,{children:e.jsx(u,{})}),e.jsxs(j,{children:[e.jsx(s,{value:"net15",children:"Net 15"}),e.jsx(s,{value:"net30",children:"Net 30"}),e.jsx(s,{value:"net45",children:"Net 45"}),e.jsx(s,{value:"net60",children:"Net 60"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Auto-reminders"}),e.jsxs(o,{value:U,onValueChange:H,children:[e.jsx(h,{children:e.jsx(u,{})}),e.jsxs(j,{children:[e.jsx(s,{value:"enabled",children:"Enabled"}),e.jsx(s,{value:"disabled",children:"Disabled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Late Fee Policy"}),e.jsxs(o,{value:K,onValueChange:Q,children:[e.jsx(h,{children:e.jsx(u,{})}),e.jsxs(j,{children:[e.jsx(s,{value:"percentage",children:"1.5% per month"}),e.jsx(s,{value:"fixed",children:"$25 per month"}),e.jsx(s,{value:"none",children:"No late fees"})]})]})]})]})})]})})]}),l&&e.jsx(ie,{open:!!l,onOpenChange:()=>b(null),children:e.jsxs(ce,{className:"max-w-2xl",children:[e.jsx(re,{children:e.jsxs(de,{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5"}),"Invoice Details"]})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Invoice Number"}),e.jsx("div",{className:"font-medium",children:l.invoiceNumber})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Status"}),e.jsx(D,{className:w(l.status),children:l.status})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Client"}),e.jsx("div",{className:"font-medium",children:l.clientName})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Amount"}),e.jsxs("div",{className:"font-medium",children:["$",l.amount.toFixed(2)]})]})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Items"}),e.jsx("div",{className:"space-y-2",children:l.items.map(a=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[e.jsx("span",{className:"text-sm",children:a.description}),e.jsxs("span",{className:"text-sm font-medium",children:["$",a.amount.toFixed(2)]})]},a.id))})]}),l.gpt5Optimization&&e.jsxs("div",{children:[e.jsxs(t,{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4 text-purple-500"}),"AI Price Optimization"]}),e.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-purple-800 dark:text-purple-200",children:["Suggested Amount: ",e.jsxs("span",{className:"font-bold",children:["$",l.gpt5Optimization.suggestedAmount.toFixed(2)]})]}),e.jsxs("div",{className:"text-sm text-purple-700 dark:text-purple-300 mt-1",children:["Confidence: ",Math.round(l.gpt5Optimization.confidence*100),"%"]}),e.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-300 mt-1",children:l.gpt5Optimization.reasoning})]})]})]})]})})]})}export{Ie as default};
