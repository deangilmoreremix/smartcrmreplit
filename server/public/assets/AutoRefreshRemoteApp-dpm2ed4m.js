import{bw as S,r as o,j as e,bb as A,b9 as D,a as L,cy as z,bq as M,X as T}from"./index-e3V0CD7Y.js";const F=({src:x,title:d,className:m="w-full h-full",onClose:f,defaultRefreshInterval:b=300,allowFullscreen:p=!0,sandbox:y="allow-same-origin allow-scripts allow-forms allow-popups allow-navigation allow-top-navigation",allow:v="clipboard-read; clipboard-write; fullscreen; microphone; camera"})=>{const{isDark:t}=S(),[a,j]=o.useState(b),[s,w]=o.useState(!1),[R,u]=o.useState(a),[N,h]=o.useState(Date.now()),n=o.useRef(null),c=o.useRef(),i=o.useRef(),g=()=>{if(n.current){const r=n.current.src;n.current.src="about:blank",setTimeout(()=>{n.current&&(n.current.src=r)},100),h(Date.now()),u(a)}},$=()=>{w(!s),s||u(a)},E=r=>{j(r),u(r)};o.useEffect(()=>(s&&a>0?(c.current=setInterval(()=>{g()},a*1e3),i.current=setInterval(()=>{u(r=>r<=1?a:r-1)},1e3)):(c.current&&clearInterval(c.current),i.current&&clearInterval(i.current)),()=>{c.current&&clearInterval(c.current),i.current&&clearInterval(i.current)}),[s,a]);const k=r=>{const l=Math.floor(r/60),I=r%60;return`${l}:${I.toString().padStart(2,"0")}`},C=()=>{const r=Date.now(),l=Math.floor((r-N)/1e3);return l<60?`${l}s ago`:l<3600?`${Math.floor(l/60)}m ago`:`${Math.floor(l/3600)}h ago`};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 border-b ${t?"border-gray-700 bg-gray-800":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h3",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:d}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:$,className:`flex items-center space-x-1 px-2 py-1 rounded text-xs font-medium transition-colors ${s?"bg-green-500 text-white":`${t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`}`,title:s?"Disable auto-refresh":"Enable auto-refresh",children:[s?e.jsx(A,{size:12}):e.jsx(D,{size:12}),e.jsx("span",{children:"Auto"})]}),e.jsxs("select",{value:a,onChange:r=>E(Number(r.target.value)),className:`px-2 py-1 rounded text-xs ${t?"bg-gray-700 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"}`,disabled:s,children:[e.jsx("option",{value:30,children:"30s"}),e.jsx("option",{value:60,children:"1m"}),e.jsx("option",{value:120,children:"2m"}),e.jsx("option",{value:300,children:"5m"}),e.jsx("option",{value:600,children:"10m"}),e.jsx("option",{value:1800,children:"30m"})]}),s&&e.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded text-xs ${t?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-800"}`,children:[e.jsx(L,{size:12}),e.jsx("span",{children:k(R)})]})]}),e.jsxs("span",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:["Last: ",C()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:g,className:`p-2 rounded-md transition-colors ${t?"hover:bg-gray-700 text-gray-400":"hover:bg-gray-200 text-gray-600"}`,title:"Refresh now",children:e.jsx(z,{size:16})}),e.jsx("button",{onClick:()=>window.open(x,"_blank"),className:`p-2 rounded-md transition-colors ${t?"hover:bg-gray-700 text-gray-400":"hover:bg-gray-200 text-gray-600"}`,title:"Open in new tab",children:e.jsx(M,{size:16})}),f&&e.jsx("button",{onClick:f,className:`p-2 rounded-md transition-colors ${t?"hover:bg-gray-700 text-gray-400":"hover:bg-gray-200 text-gray-600"}`,title:"Close",children:e.jsx(T,{size:16})})]})]}),e.jsx("div",{className:"flex-1 p-2",children:e.jsx("iframe",{ref:n,src:x,className:`rounded-xl border-0 ${m}`,title:d,frameBorder:"0",allow:v,sandbox:y,allowFullScreen:p,scrolling:"yes",style:{minHeight:"600px",overflow:"auto"},onLoad:()=>{h(Date.now());try{n.current?.contentWindow&&n.current.contentWindow.postMessage({type:"FULLSCREEN_MODE",fullscreen:!0},"*")}catch{console.log("Could not communicate with iframe")}}})})]})};export{F as A};
