import{u as H,r as u,j as e,L as U,C as S,P as L,S as v,a as p,b as F,c as W,d as q,X as G,U as I,B as J}from"./index-e3V0CD7Y.js";const K=()=>{const{tasks:i,isLoading:A,createTask:O,updateTask:M,deleteTask:P,markTaskComplete:N,selectTask:w,selectedTask:r}=H(),[d,f]=u.useState({status:"all",priority:"all",dateRange:"all"}),[D]=u.useState({field:"dueDate",direction:"asc"}),[b,R]=u.useState(""),[B,c]=u.useState(!1),[j,y]=u.useState(!1),[o,n]=u.useState({title:"",description:"",dueDate:void 0,priority:"medium",completed:!1,category:"follow-up"}),m=[...Object.values(i).filter(t=>{if(d.status==="completed"&&!t.completed||d.status==="uncompleted"&&t.completed||d.priority!=="all"&&t.priority!==d.priority)return!1;if(d.dateRange!=="all"&&t.dueDate){const s=new Date,a=new Date(s.getFullYear(),s.getMonth(),s.getDate()),l=new Date(a);l.setDate(l.getDate()+1);const x=new Date(a);switch(x.setDate(x.getDate()+7),d.dateRange){case"overdue":if(t.dueDate>=a)return!1;break;case"today":if(t.dueDate<a||t.dueDate>=l)return!1;break;case"thisWeek":if(t.dueDate<a||t.dueDate>=x)return!1;break}}if(b){const s=b.toLowerCase();return t.title.toLowerCase().includes(s)||(t.description||"").toLowerCase().includes(s)}return!0})].sort((t,s)=>{let a=0;switch(D.field){case"title":a=t.title.localeCompare(s.title);break;case"priority":const l={high:3,medium:2,low:1,urgent:4};a=(l[s.priority]||0)-(l[t.priority]||0);break;case"dueDate":!t.dueDate&&!s.dueDate?a=0:t.dueDate?s.dueDate?a=t.dueDate.getTime()-s.dueDate.getTime():a=-1:a=1;break}return D.direction==="desc"?-a:a}),h={overdue:m.filter(t=>t.completed||!t.dueDate?!1:t.dueDate<new Date),today:m.filter(t=>{if(t.completed||!t.dueDate)return!1;const s=new Date;s.setHours(0,0,0,0);const a=new Date(s);return a.setDate(a.getDate()+1),t.dueDate>=s&&t.dueDate<a}),upcoming:m.filter(t=>{if(t.completed||!t.dueDate)return!1;const s=new Date;s.setHours(0,0,0,0);const a=new Date(s);return a.setDate(a.getDate()+1),t.dueDate>=a}),completed:m.filter(t=>t.completed),noDueDate:m.filter(t=>!t.completed&&!t.dueDate)},E=t=>{w(t);const s=i[t];y(!1),n(s),c(!0)},k=()=>{w(null),y(!1),n({title:"",description:"",dueDate:void 0,priority:"medium",completed:!1,category:"follow-up"}),c(!0)},$=async()=>{r?await M(r,o):await O(o),c(!1)},C=t=>{if(!t)return"No due date";const s=new Date;s.setHours(0,0,0,0);const a=new Date(s);return a.setDate(a.getDate()+1),t<s?`Overdue - ${t.toLocaleDateString()}`:t>=s&&t<a?`Today - ${t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:t.toLocaleDateString()},T=({priority:t})=>{const s={urgent:"bg-red-200 text-red-900",high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"};return e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${s[t]} capitalize`,children:t})},z=({category:t})=>{const s={call:"bg-purple-100 text-purple-800",email:"bg-blue-100 text-blue-800",meeting:"bg-indigo-100 text-indigo-800","follow-up":"bg-amber-100 text-amber-800",proposal:"bg-pink-100 text-pink-800",research:"bg-cyan-100 text-cyan-800",administrative:"bg-gray-100 text-gray-800",other:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${s[t]||s.other} capitalize`,children:t.replace("-"," ")})},g=({title:t,tasks:s,icon:a})=>s.length===0?null:e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[a,e.jsx("span",{className:"ml-2",children:t}),e.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",s.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:s.map(l=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:border-blue-200 p-3 transition-all cursor-pointer",onClick:()=>E(l.id),children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"pt-0.5",children:e.jsx("input",{type:"checkbox",checked:l.completed,onChange:x=>{x.stopPropagation(),N(l.id,x.target.checked)},className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"})}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${l.completed?"line-through text-gray-500":"text-gray-900"}`,children:l.title}),l.description&&e.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-2",children:l.description}),(l.dueDate||l.priority)&&e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[l.dueDate&&e.jsxs("div",{className:"flex items-center text-xs",children:[e.jsx(p,{size:12,className:"mr-1 text-gray-400"}),e.jsx("span",{className:!l.completed&&l.dueDate<new Date?"text-red-600 font-medium":"text-gray-500",children:C(l.dueDate)})]}),l.priority&&e.jsx(T,{priority:l.priority}),l.category&&e.jsx(z,{category:l.category})]})]})]})})},l.id))})]});return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsxs("header",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tasks"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your tasks and follow-ups"})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex flex-wrap gap-2",children:[e.jsxs(U,{to:"/tasks/calendar",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(S,{size:18,className:"mr-1.5"}),"Calendar View"]}),e.jsxs("button",{onClick:k,className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[e.jsx(L,{size:18,className:"mr-1.5"}),"Add Task"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100 flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center text-blue-600 mr-3",children:e.jsx(v,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Tasks"}),e.jsx("p",{className:"text-xl font-semibold",children:Object.values(i).length})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100 flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-yellow-100 flex items-center justify-center text-yellow-600 mr-3",children:e.jsx(p,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Pending"}),e.jsx("p",{className:"text-xl font-semibold",children:Object.values(i).filter(t=>!t.completed).length})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100 flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-green-100 flex items-center justify-center text-green-600 mr-3",children:e.jsx(F,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Completed"}),e.jsx("p",{className:"text-xl font-semibold",children:Object.values(i).filter(t=>t.completed).length})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Task List"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(W,{size:16,className:"text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search tasks...",value:b,onChange:t=>R(t.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("select",{value:`${d.status}`,onChange:t=>f({...d,status:t.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"uncompleted",children:"Pending"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{value:d.priority,onChange:t=>f({...d,priority:t.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]}),e.jsxs("select",{value:d.dateRange,onChange:t=>f({...d,dateRange:t.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"all",children:"All Dates"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"thisWeek",children:"This Week"})]})]})]})}),e.jsx("div",{className:"p-4",children:A?e.jsx("div",{className:"py-10 flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"})}):m.length===0?e.jsxs("div",{className:"py-10 text-center",children:[e.jsx(v,{size:48,className:"mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No tasks found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Create a new task to get started"}),e.jsxs("button",{onClick:k,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(L,{size:18,className:"mr-1.5"}),"Add Task"]})]}):e.jsxs("div",{children:[e.jsx(g,{title:"Overdue",tasks:h.overdue,icon:e.jsx(q,{size:20,className:"text-red-500"})}),e.jsx(g,{title:"Today",tasks:h.today,icon:e.jsx(p,{size:20,className:"text-blue-500"})}),e.jsx(g,{title:"Upcoming",tasks:h.upcoming,icon:e.jsx(S,{size:20,className:"text-indigo-500"})}),e.jsx(g,{title:"No Due Date",tasks:h.noDueDate,icon:e.jsx(v,{size:20,className:"text-gray-500"})}),e.jsx(g,{title:"Completed",tasks:h.completed,icon:e.jsx(F,{size:20,className:"text-green-500"})})]})})]}),B&&e.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r?j?"Edit Task":"Task Details":"Create New Task"}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-500",children:e.jsx(G,{size:20})})]}),j||!r?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Task Title"}),e.jsx("input",{id:"title",type:"text",value:o.title||"",onChange:t=>n({...o,title:t.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{id:"description",rows:3,value:o.description||"",onChange:t=>n({...o,description:t.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Task description or notes"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700",children:"Due Date"}),e.jsx("input",{id:"dueDate",type:"datetime-local",value:o.dueDate?new Date(o.dueDate.getTime()-o.dueDate.getTimezoneOffset()*6e4).toISOString().slice(0,16):"",onChange:t=>n({...o,dueDate:t.target.value?new Date(t.target.value):void 0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700",children:"Priority"}),e.jsxs("select",{id:"priority",value:o.priority,onChange:t=>n({...o,priority:t.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsxs("select",{id:"category",value:o.category,onChange:t=>n({...o,category:t.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[e.jsx("option",{value:"call",children:"Call"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"meeting",children:"Meeting"}),e.jsx("option",{value:"follow-up",children:"Follow-up"}),e.jsx("option",{value:"proposal",children:"Proposal"}),e.jsx("option",{value:"research",children:"Research"}),e.jsx("option",{value:"administrative",children:"Administrative"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"completed",type:"checkbox",checked:o.completed||!1,onChange:t=>n({...o,completed:t.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"completed",className:"ml-2 block text-sm text-gray-900",children:"Mark as completed"})]})]}):r&&i[r]?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"pt-0.5",children:e.jsx("input",{type:"checkbox",checked:i[r].completed,onChange:t=>N(r,t.target.checked),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:`text-lg font-medium ${i[r].completed?"line-through text-gray-500":"text-gray-900"}`,children:i[r].title}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[i[r].dueDate&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(p,{size:16,className:"mr-1 text-gray-400"}),e.jsx("span",{className:!i[r].completed&&i[r].dueDate<new Date?"text-red-600 font-medium":"text-gray-500",children:C(i[r].dueDate)})]}),i[r].priority&&e.jsx(T,{priority:i[r].priority}),i[r].category&&e.jsx(z,{category:i[r].category})]})]})]})}),i[r].description&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("div",{className:"prose prose-sm max-w-none bg-gray-50 p-3 rounded-md border border-gray-200",children:e.jsx("p",{className:"whitespace-pre-wrap",children:i[r].description})})]}),i[r].relatedTo&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Related To"}),e.jsx("div",{className:"flex items-center",children:i[r].relatedTo.type==="contact"?e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(I,{size:16,className:"mr-2 text-gray-400"}),e.jsx("span",{children:"Contact: John Doe"})]}):e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(J,{size:16,className:"mr-2 text-gray-400"}),e.jsx("span",{children:"Deal: Enterprise License"})]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Created"}),e.jsx("p",{className:"text-sm text-gray-600",children:i[r].createdAt.toLocaleString()})]}),i[r].completedAt&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Completed"}),e.jsx("p",{className:"text-sm text-gray-600",children:i[r].completedAt.toLocaleString()})]})]}):null]})})}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:j||!r?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:$,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:r?"Update Task":"Create Task"}),e.jsx("button",{type:"button",onClick:()=>c(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>y(!0),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Edit Task"}),e.jsx("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to delete this task?")&&(P(r),c(!1))},className:"mt-3 w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),e.jsx("button",{type:"button",onClick:()=>c(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Close"})]})})]})]})})]})};export{K as default};
