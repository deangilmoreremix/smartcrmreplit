import{bw as re,r as t,j as e,a6 as i,P as ne,aq as ce,aU as S,af as de,ag as oe,ah as p,ai as u,aa as c,ab as d,ac as o,am as xe,ad as x,aj as f,cy as me,ar as he,aQ as ge,aX as je,b3 as pe,b8 as ue,b as I,aW as z}from"./index-e3V0CD7Y.js";import{I as ve}from"./input-CBb2iGdE.js";import{L as l}from"./label-D929QgCh.js";import{T as C}from"./textarea-Dn_UEKqi.js";import{S as m,a as h,b as g,c as j,d as a}from"./select-D9Wy1FBy.js";import{D as Ne,a as ye,b as fe,c as be}from"./dialog-CFFKOlnO.js";import{P as we}from"./progress-LGgqPC0t.js";import{u as T}from"./useQuery-BS2P2qdM.js";import{C as Me,g as Se}from"./gpt5CommunicationService-LRMAonUn.js";function Be(){const{isDark:Ce}=re(),[G,L]=t.useState("messages"),[V,v]=t.useState(!1),[Te,O]=t.useState(!1),[b,k]=t.useState("twilio"),[n,N]=t.useState(""),[w,P]=t.useState(""),[R,B]=t.useState([]),[y,F]=t.useState(!1),[E,K]=t.useState("professional"),[$,q]=t.useState("engagement"),[U,W]=t.useState("enabled"),[H,Z]=t.useState("enabled"),[J,Q]=t.useState("important"),X=[{id:"twilio",name:"Twilio",apiKey:"SK******************************",costPerMessage:.0075,supportedFeatures:["SMS","MMS","Voice"],status:"active",deliveryRate:.987,responseTime:2.3},{id:"aws-sns",name:"AWS SNS",apiKey:"AKIA********************",costPerMessage:.0065,supportedFeatures:["SMS","Email"],status:"active",deliveryRate:.982,responseTime:2.8},{id:"messagebird",name:"MessageBird",apiKey:"MB************************",costPerMessage:.008,supportedFeatures:["SMS","MMS","Voice","WhatsApp"],status:"inactive",deliveryRate:.975,responseTime:3.1}],Y=[{id:"1",content:"Hi John, thanks for your interest in our product demo. When would be a good time to schedule a call?",recipient:"+1234567890",provider:"twilio",status:"delivered",sentAt:"2024-01-15T10:30:00Z",gpt5Suggestions:["Follow up with specific times","Ask about their timeline"],sentiment:"positive",priority:"high"},{id:"2",content:"Your order has been shipped and should arrive by Friday.",recipient:"+1987654321",provider:"aws-sns",status:"sent",sentAt:"2024-01-15T09:15:00Z",sentiment:"neutral",priority:"medium"}],_={totalMessages:1247,deliveredMessages:1223,deliveryRate:.981,averageResponseTime:2.4,totalCost:8.75,costPerMessage:.007,activeProviders:2},{data:M=X,isLoading:ke}=T({queryKey:["/api/messaging/providers"],refetchInterval:3e4}),{data:ee=Y,isLoading:Pe}=T({queryKey:["/api/messaging/messages"],refetchInterval:3e4}),{data:r=_,isLoading:Re}=T({queryKey:["/api/messaging/stats"],refetchInterval:3e4}),A=async()=>{F(!0);try{const s=await Se.generateSMSReply({message:n,context:"Customer inquiry about product demo",tone:"professional"});B(s.suggestions)}catch(s){console.error("Failed to generate smart reply:",s)}finally{F(!1)}},se=async()=>{try{(await fetch("/api/messaging/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:n,recipient:w,provider:b})})).ok&&(v(!1),N(""),P(""),window.location.reload())}catch(s){console.error("Failed to send message:",s)}},D=s=>{switch(s){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200";case"delivered":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200";case"sent":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200";case"inactive":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}},ae=s=>{switch(s){case"positive":return"bg-green-100 text-green-800";case"neutral":return"bg-yellow-100 text-yellow-800";case"negative":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},te=[e.jsxs(i,{onClick:()=>v(!0),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Compose Message"]},"compose"),e.jsxs(i,{variant:"outline",onClick:()=>O(!0),children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Manage Providers"]},"providers"),e.jsxs(i,{variant:"outline",onClick:A,disabled:y||!n.trim(),children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),y?"Generating...":"AI Assist"]},"ai-assist")],ie=e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.totalMessages}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Messages"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(r.deliveryRate*100),"%"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Delivery Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[r.averageResponseTime,"s"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Response Time"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["$",r.costPerMessage.toFixed(4)]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cost per Message"})]})]});return e.jsxs(Me,{appName:"Intelligent Messaging Platform",appDescription:"AI-powered SMS and MMS with multi-provider support, smart responses, and automated optimization",actionButtons:te,headerStats:ie,children:[e.jsxs(de,{value:G,onValueChange:L,className:"space-y-6",children:[e.jsxs(oe,{className:"grid w-full grid-cols-5",children:[e.jsx(p,{value:"messages",children:"Messages"}),e.jsx(p,{value:"providers",children:"Providers"}),e.jsx(p,{value:"analytics",children:"Analytics"}),e.jsx(p,{value:"ai-tools",children:"AI Tools"}),e.jsx(p,{value:"settings",children:"Settings"})]}),e.jsx(u,{value:"messages",className:"space-y-6",children:e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5"}),"Recent Messages"]})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:ee.map(s=>e.jsxs("div",{className:"flex items-start justify-between p-4 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(f,{className:D(s.status),children:s.status}),e.jsx(f,{variant:"outline",children:s.provider}),s.sentiment&&e.jsx(f,{className:ae(s.sentiment),children:s.sentiment})]}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mb-2",children:s.content}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["To: ",s.recipient]}),e.jsx("span",{children:new Date(s.sentAt).toLocaleString()})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(i,{size:"sm",variant:"outline",children:e.jsx(me,{className:"h-4 w-4"})})})]},s.id))})})]})}),e.jsx(u,{value:"providers",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(s=>e.jsxs(c,{className:"relative",children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5"}),s.name]}),e.jsx(f,{className:D(s.status),children:s.status})]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Cost/Message:"}),e.jsxs("div",{className:"font-semibold",children:["$",s.costPerMessage.toFixed(4)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Delivery Rate:"}),e.jsxs("div",{className:"font-semibold",children:[Math.round(s.deliveryRate*100),"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Response Time:"}),e.jsxs("div",{className:"font-semibold",children:[s.responseTime,"s"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Features:"}),e.jsx("div",{className:"font-semibold",children:s.supportedFeatures.length})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Delivery Rate"}),e.jsxs("span",{children:[Math.round(s.deliveryRate*100),"%"]})]}),e.jsx(we,{value:s.deliveryRate*100,className:"h-2"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{size:"sm",variant:"outline",className:"flex-1",children:"Configure"}),e.jsx(i,{size:"sm",variant:"outline",className:"flex-1",children:"Test"})]})]})]},s.id))})}),e.jsx(u,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5"}),"Performance Metrics"]})}),e.jsx(x,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Messages Sent"}),e.jsx("span",{className:"font-semibold",children:r.totalMessages})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Messages Delivered"}),e.jsx("span",{className:"font-semibold text-green-600",children:r.deliveredMessages})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Cost"}),e.jsxs("span",{className:"font-semibold",children:["$",r.totalCost.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Active Providers"}),e.jsx("span",{className:"font-semibold",children:r.activeProviders})]})]})})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),"Cost Analysis"]})}),e.jsx(x,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Average Cost/Message"}),e.jsxs("span",{className:"font-semibold",children:["$",r.costPerMessage.toFixed(4)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Monthly Budget Used"}),e.jsx("span",{className:"font-semibold",children:"$8.75"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Projected Monthly Cost"}),e.jsx("span",{className:"font-semibold",children:"$12.50"})]})]})})]})]})}),e.jsxs(u,{value:"ai-tools",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"Smart Reply Generator"]})}),e.jsx(x,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"message-context",children:"Message Context"}),e.jsx(C,{id:"message-context",placeholder:"Paste the incoming message here...",rows:4,value:n,onChange:s=>N(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"tone",children:"Response Tone"}),e.jsxs(m,{value:E,onValueChange:K,children:[e.jsx(h,{children:e.jsx(g,{})}),e.jsxs(j,{children:[e.jsx(a,{value:"professional",children:"Professional"}),e.jsx(a,{value:"friendly",children:"Friendly"}),e.jsx(a,{value:"urgent",children:"Urgent"}),e.jsx(a,{value:"casual",children:"Casual"})]})]})]}),e.jsxs(i,{className:"w-full",onClick:A,disabled:y||!n.trim(),children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),y?"Generating...":"Generate Smart Reply"]})]})})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5"}),"Message Optimizer"]})}),e.jsx(x,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"optimize-content",children:"Message to Optimize"}),e.jsx(C,{id:"optimize-content",placeholder:"Enter your message for AI optimization...",rows:4})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"goal",children:"Optimization Goal"}),e.jsxs(m,{value:$,onValueChange:q,children:[e.jsx(h,{children:e.jsx(g,{})}),e.jsxs(j,{children:[e.jsx(a,{value:"engagement",children:"Increase Engagement"}),e.jsx(a,{value:"response",children:"Improve Response Rate"}),e.jsx(a,{value:"conversion",children:"Boost Conversion"}),e.jsx(a,{value:"clarity",children:"Enhance Clarity"})]})]})]}),e.jsxs(i,{className:"w-full",variant:"outline",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Optimize Message"]})]})})]})]}),R.length>0&&e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"AI-Generated Suggestions"]})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-3",children:R.map((s,le)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx(I,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm",children:s}),e.jsx(i,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>N(s),children:"Use This"})]})]},le))})})]})]}),e.jsx(u,{value:"settings",className:"space-y-6",children:e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(o,{children:"Messaging Settings"})}),e.jsx(x,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Default Provider"}),e.jsxs(m,{value:b,onValueChange:k,children:[e.jsx(h,{children:e.jsx(g,{})}),e.jsx(j,{children:M.map(s=>e.jsx(a,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Auto-Failover"}),e.jsxs(m,{value:U,onValueChange:W,children:[e.jsx(h,{children:e.jsx(g,{})}),e.jsxs(j,{children:[e.jsx(a,{value:"enabled",children:"Enabled"}),e.jsx(a,{value:"disabled",children:"Disabled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Message Templates"}),e.jsxs(m,{value:H,onValueChange:Z,children:[e.jsx(h,{children:e.jsx(g,{})}),e.jsxs(j,{children:[e.jsx(a,{value:"enabled",children:"Enabled"}),e.jsx(a,{value:"disabled",children:"Disabled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Delivery Notifications"}),e.jsxs(m,{value:J,onValueChange:Q,children:[e.jsx(h,{children:e.jsx(g,{})}),e.jsxs(j,{children:[e.jsx(a,{value:"all",children:"All Messages"}),e.jsx(a,{value:"important",children:"Important Only"}),e.jsx(a,{value:"none",children:"None"})]})]})]})]})})]})})]}),e.jsx(Ne,{open:V,onOpenChange:v,children:e.jsxs(ye,{className:"max-w-2xl",children:[e.jsx(fe,{children:e.jsxs(be,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Compose Message"]})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"recipient",children:"Recipient Phone Number"}),e.jsx(ve,{id:"recipient",placeholder:"+1234567890",value:w,onChange:s=>P(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"provider",children:"Message Provider"}),e.jsxs(m,{value:b,onValueChange:k,children:[e.jsx(h,{children:e.jsx(g,{})}),e.jsx(j,{children:M.filter(s=>s.status==="active").map(s=>e.jsxs(a,{value:s.id,children:[s.name," ($",s.costPerMessage.toFixed(4),"/msg)"]},s.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"message",children:"Message Content"}),e.jsx(C,{id:"message",placeholder:"Type your message here...",rows:4,value:n,onChange:s=>N(s.target.value),maxLength:160}),e.jsxs("div",{className:"text-right text-sm text-gray-500",children:[n.length,"/160 characters"]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),e.jsxs(i,{onClick:se,disabled:!n.trim()||!w.trim(),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Send Message"]})]})]})]})})]})}export{Be as default};
