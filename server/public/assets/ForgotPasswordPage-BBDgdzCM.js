import{r as t,j as e,b as p,aM as k,L as u,d as y,cF as j}from"./index-e3V0CD7Y.js";import{A as f}from"./arrow-left-D-nrk6py.js";const v=()=>{const[s,h]=t.useState(""),[a,n]=t.useState(!1),[o,l]=t.useState(null),[b,c]=t.useState(!1),g=async d=>{d.preventDefault(),n(!0),l(null);try{const r=window.location.origin,x=r.includes("localhost")||r.includes("replit.dev")||r.includes("replit.app"),m=x?`${r}/auth/recovery`:"https://smart-crm.videoremix.io/auth/recovery";console.log("Sending password reset with redirect URL:",m),console.log("Current origin:",r,"Is development:",x);const{error:i}=await j.auth.resetPasswordForEmail(s,{redirectTo:m});i?(console.error("Password reset error:",i),l(i.message||"Failed to send password reset email")):c(!0)}catch(r){console.error("Password reset exception:",r),l(r.message||"An unexpected error occurred")}finally{n(!1)}};return b?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-2xl rounded-2xl p-8 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 rounded-full p-4 w-20 h-20 mx-auto mb-6",children:e.jsx(p,{className:"h-12 w-12 text-green-600 dark:text-green-400 mx-auto"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Check Your Email"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["We've sent a password reset link to ",e.jsx("strong",{className:"text-gray-900 dark:text-white",children:s})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(k,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium mb-1",children:"What to do next:"}),e.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsx("li",{children:"1. Check your inbox and spam folder"}),e.jsx("li",{children:"2. Click the reset link in the email"}),e.jsx("li",{children:"3. Enter your new password"})]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>c(!1),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors","data-testid":"button-send-another",children:"Send Another Email"}),e.jsx(u,{to:"/signin",className:"block w-full text-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white py-2 transition-colors","data-testid":"link-back-to-signin",children:"Back to Sign In"})]})]})})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:["Smart",e.jsx("span",{className:"text-blue-600",children:"CRM"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Reset your password"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-2xl rounded-2xl p-8 border border-gray-200 dark:border-gray-700",children:[o&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:o})]})}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{id:"email",type:"email",value:s,onChange:d=>h(d.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"Enter your email address",required:!0,disabled:a,"data-testid":"input-email"})]}),e.jsx("button",{type:"submit",disabled:a,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center","data-testid":"button-submit",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending Reset Email..."]}):"Send Reset Email"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(u,{to:"/signin",className:"inline-flex items-center space-x-2 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm transition-colors","data-testid":"link-back-to-signin",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{children:"Back to Sign In"})]})})]})]})})};export{v as default};
