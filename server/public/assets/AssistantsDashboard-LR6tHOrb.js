import{r as c,j as e,cy as j,cs as m,am as I,a as C,aX as M,b4 as u,aI as z,cK as k,X as L,dp as U,aQ as D,b as E,B as F,b5 as B}from"./index-e3V0CD7Y.js";import{persistentAssistantService as i}from"./persistentAssistantService-1dAMUpe6.js";const X=()=>{const[l,p]=c.useState([]),[N,x]=c.useState(!0),[r,o]=c.useState(null),[h,y]=c.useState([]),[f,v]=c.useState(new Map),[n,b]=c.useState({});c.useEffect(()=>{d(),w();const s=setInterval(d,3e4);return()=>clearInterval(s)},[]);const d=async()=>{try{await i.initialize();const s=i.getAssistantStats();p(s);const t=new Map;for(const a of s){const T=Array.from(a.activeThreads.entries());t.set(a.id,T)}v(t),x(!1)}catch(s){console.error("Failed to load assistant data:",s),x(!1)}},w=async()=>{const s={totalInteractions:l.reduce((t,a)=>t+a.totalInteractions,0),avgResponseTime:l.reduce((t,a)=>t+a.performance.averageResponseTime,0)/Math.max(l.length,1),totalActiveThreads:Array.from(f.values()).reduce((t,a)=>t+a.length,0),overallSuccessRate:l.reduce((t,a)=>t+a.performance.successRate,0)/Math.max(l.length,1)};b(s)},A=async(s,t)=>{try{const a=await i.getAssistantMemory(s.type,t,50);y(a)}catch(a){console.error("Failed to load conversation history:",a)}},g=s=>{switch(s){case"contact":return e.jsx(B,{className:"h-5 w-5"});case"deal":return e.jsx(F,{className:"h-5 w-5"});case"task":return e.jsx(E,{className:"h-5 w-5"});case"pipeline":return e.jsx(D,{className:"h-5 w-5"});default:return e.jsx(m,{className:"h-5 w-5"})}},S=s=>{const t=(Date.now()-s.getTime())/36e5;return t<1?"text-green-600 bg-green-100":t<24?"text-yellow-600 bg-yellow-100":"text-gray-600 bg-gray-100"},R=s=>{const t=(Date.now()-s.getTime())/36e5;return t<1?"Active":t<24?"Recent":"Idle"};return N?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(j,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading AI Assistants..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"AI Assistants Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Monitor and manage your persistent AI assistants"})]}),e.jsxs("button",{onClick:d,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-4",children:e.jsx(m,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Assistants"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.length})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg mr-4",children:e.jsx(I,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Interactions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.totalInteractions?.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg mr-4",children:e.jsx(C,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Response Time"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(n.avgResponseTime||0),"ms"]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg mr-4",children:e.jsx(M,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round((n.overallSuccessRate||0)*100),"%"]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-8",children:l.map(s=>e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>o(s),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg mr-3",children:g(s.type)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[s.type," Assistant"]})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(s.lastUsed)}`,children:R(s.lastUsed)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Interactions"}),e.jsx("span",{className:"text-sm font-medium",children:s.totalInteractions.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active Threads"}),e.jsx("span",{className:"text-sm font-medium",children:s.activeThreads.size})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Success Rate"}),e.jsxs("span",{className:"text-sm font-medium",children:[Math.round(s.performance.successRate*100),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Response"}),e.jsxs("span",{className:"text-sm font-medium",children:[Math.round(s.performance.averageResponseTime),"ms"]})]}),e.jsx("div",{className:"pt-2 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Satisfaction"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(u,{className:"h-4 w-4 text-yellow-400 mr-1"}),e.jsx("span",{className:"text-sm font-medium",children:s.performance.userSatisfaction.toFixed(1)})]})]})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-blue-600 text-sm font-medium",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"View Details",e.jsx(k,{className:"h-4 w-4 ml-1"})]})]},s.id))}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg mr-4",children:g(r.type)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r.name}),e.jsxs("p",{className:"text-gray-600 capitalize",children:[r.type," Assistant"]})]})]}),e.jsx("button",{onClick:()=>o(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(L,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Total Interactions"}),e.jsx("span",{className:"font-medium",children:r.totalInteractions.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Success Rate"}),e.jsxs("span",{className:"font-medium",children:[Math.round(r.performance.successRate*100),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Average Response Time"}),e.jsxs("span",{className:"font-medium",children:[Math.round(r.performance.averageResponseTime),"ms"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"User Satisfaction"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(u,{className:"h-4 w-4 text-yellow-400 mr-1"}),e.jsx("span",{className:"font-medium",children:r.performance.userSatisfaction.toFixed(1)})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Active Conversations"}),e.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[Array.from(r.activeThreads.entries()).map(([s,t])=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg cursor-pointer hover:bg-blue-100",onClick:()=>A(r,s),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 text-blue-600 mr-2"}),e.jsxs("span",{className:"text-sm font-medium",children:["Entity ",s.slice(0,8),"..."]})]}),e.jsx("span",{className:"text-xs text-blue-600",children:"View Chat"})]},s)),r.activeThreads.size===0&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No active conversations"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Assistant Instructions"}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:r.instructions||"No specific instructions configured."})})]}),h.length>0&&e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Recent Conversation"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto border rounded-lg p-4",children:h.slice(0,10).map((s,t)=>e.jsxs("div",{className:`p-2 rounded ${s.role==="user"?"bg-blue-50 ml-8":"bg-gray-50 mr-8"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 capitalize",children:s.role}),e.jsx("span",{className:"text-xs text-gray-500",children:s.timestamp.toLocaleTimeString()})]}),e.jsx("p",{className:"text-sm text-gray-700",children:s.content})]},t))})]})]})]})}),l.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(m,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-700 mb-2",children:"No AI Assistants Found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Your AI assistants will appear here once they're initialized."}),e.jsx("button",{onClick:()=>i.initialize(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Initialize Assistants"})]})]})})};export{X as default};
