import{r as n,j as e,am as i,aM as u,b5 as C,c as W,P as A,ar as J,cP as $,aW as B,d as Y,cz as M,a as q}from"./index-e3V0CD7Y.js";import{P as K}from"./paperclip-nKH9HzHC.js";const Q=()=>{const[t,h]=n.useState(null),[g,d]=n.useState([]),[p,y]=n.useState([]),[D,z]=n.useState([]),[l,k]=n.useState("messages"),[m,b]=n.useState("sms"),[o,x]=n.useState(""),[c,T]=n.useState(""),[R,O]=n.useState(!1),[I,j]=n.useState(!1),[U,P]=n.useState(null);n.useEffect(()=>{const s=[{id:"1",name:"John Smith",phone:"+1-555-0123",email:"john@example.com",lastMessage:new Date(Date.now()-3e5),unreadCount:2},{id:"2",name:"Sarah Johnson",phone:"+1-555-0456",email:"sarah@example.com",lastMessage:new Date(Date.now()-36e5),unreadCount:0},{id:"3",name:"Michael Chen",phone:"+1-555-0789",email:"michael@example.com",lastMessage:new Date(Date.now()-864e5),unreadCount:1}],a=[{id:"1",contactId:"1",contactName:"John Smith",contactPhone:"+1-555-0123",type:"sms",content:"Hi! I'm interested in learning more about your services.",direction:"inbound",timestamp:new Date(Date.now()-6e5),status:"delivered"},{id:"2",contactId:"1",contactName:"John Smith",contactPhone:"+1-555-0123",type:"sms",content:"Thanks for reaching out! I'd be happy to discuss our services with you. When would be a good time for a call?",direction:"outbound",timestamp:new Date(Date.now()-54e4),status:"read"},{id:"3",contactId:"1",contactName:"John Smith",contactPhone:"+1-555-0123",type:"sms",content:"How about tomorrow afternoon around 2 PM?",direction:"inbound",timestamp:new Date(Date.now()-3e5),status:"delivered"}],r=[{id:"1",name:"Welcome Message",content:"Hi {name}! Welcome to our service. We're excited to work with you.",type:"sms",category:"Onboarding"},{id:"2",name:"Follow-up",content:"Hi {name}, just following up on our conversation. Let me know if you have any questions!",type:"sms",category:"Follow-up"},{id:"3",name:"Appointment Reminder",content:"Hi {name}, this is a reminder about your appointment tomorrow at {time}. Looking forward to speaking with you!",type:"sms",category:"Appointments"}];y(s),d(a),z(r),h(s[0])},[]);const f=g.filter(s=>t?s.contactId===t.id:!1),L=p.filter(s=>s.name.toLowerCase().includes(c.toLowerCase())||s.phone&&s.phone.includes(c)||s.email&&s.email.toLowerCase().includes(c.toLowerCase())),N=async()=>{if(!(!o.trim()||!t)){j(!0);try{const s={id:Date.now().toString(),contactId:t.id,contactName:t.name,contactPhone:t.phone,type:m,content:o,direction:"outbound",timestamp:new Date,status:"sent"};d([...g,s]),x(""),y(p.map(a=>a.id===t.id?{...a,lastMessage:new Date}:a)),setTimeout(()=>{d(a=>a.map(r=>r.id===s.id?{...r,status:"delivered"}:r))},2e3)}catch{P("Failed to send message")}finally{j(!1)}}},E=s=>{let a=s.content;t&&(a=a.replace("{name}",t.name)),x(a),b(s.type)},F=s=>{switch(s){case"sent":return e.jsx(q,{size:12,className:"text-gray-400"});case"delivered":return e.jsx(M,{size:12,className:"text-gray-400"});case"read":return e.jsx(M,{size:12,className:"text-green-500"});case"failed":return e.jsx(Y,{size:12,className:"text-red-500"});default:return null}},v=s=>{switch(s){case"sms":return e.jsx(i,{size:16,className:"text-blue-500"});case"whatsapp":return e.jsx(i,{size:16,className:"text-green-500"});case"email":return e.jsx(u,{size:16,className:"text-purple-500"});default:return e.jsx(i,{size:16,className:"text-gray-500"})}},w=s=>s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),H=s=>{const a=new Date,r=new Date(a.getFullYear(),a.getMonth(),a.getDate()),S=new Date(s.getFullYear(),s.getMonth(),s.getDate());return S.getTime()===r.getTime()?"Today":S.getTime()===r.getTime()-864e5?"Yesterday":s.toLocaleDateString()};return e.jsxs("div",{className:"h-screen bg-gray-50 flex",children:[e.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Communication Hub"}),e.jsx("p",{className:"text-sm text-gray-600",children:"SMS, WhatsApp & Email"})]}),e.jsx("div",{className:"flex border-b border-gray-200",children:[{key:"messages",label:"Messages",icon:i},{key:"templates",label:"Templates",icon:u},{key:"broadcast",label:"Broadcast",icon:C}].map(s=>{const a=s.icon;return e.jsxs("button",{onClick:()=>k(s.key),className:`flex-1 flex items-center justify-center py-3 text-sm font-medium ${l===s.key?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(a,{size:16,className:"mr-1"}),s.label]},s.key)})}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[l==="messages"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(W,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search contacts...",value:c,onChange:s=>T(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 outline-none"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:L.map(s=>e.jsxs("div",{onClick:()=>h(s),className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 ${t?.id===s.id?"bg-blue-50 border-r-2 border-blue-500":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),s.unreadCount>0&&e.jsx("span",{className:"inline-flex items-center justify-center px-2 py-1 text-xs bg-blue-600 text-white rounded-full",children:s.unreadCount})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.phone&&e.jsx("div",{children:s.phone}),s.lastMessage&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[H(s.lastMessage)," ",w(s.lastMessage)]})]})]},s.id))})]}),l==="templates"&&e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"space-y-2",children:D.map(s=>e.jsxs("div",{onClick:()=>E(s),className:"p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.name}),e.jsx("span",{className:"text-xs text-gray-500",children:s.category})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.content}),e.jsxs("div",{className:"flex items-center mt-2",children:[v(s.type),e.jsx("span",{className:"text-xs text-gray-500 ml-1 capitalize",children:s.type})]})]},s.id))})}),l==="broadcast"&&e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(C,{size:48,className:"mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Broadcast Messages"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Send messages to multiple contacts at once"}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(A,{size:16,className:"mr-1"}),"Create Broadcast"]})]})]})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[t.phone&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{size:14,className:"mr-1"}),t.phone]}),t.email&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(u,{size:14,className:"mr-1"}),t.email]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:m,onChange:s=>b(s.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 outline-none",children:[e.jsx("option",{value:"sms",children:"SMS"}),e.jsx("option",{value:"whatsapp",children:"WhatsApp"}),e.jsx("option",{value:"email",children:"Email"})]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx($,{size:16})})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:f.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(i,{size:48,className:"mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No messages yet"}),e.jsxs("p",{className:"text-gray-500",children:["Start a conversation with ",t.name]})]}):f.map(s=>e.jsx("div",{className:`flex ${s.direction==="outbound"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${s.direction==="outbound"?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center mb-1",children:[v(s.type),e.jsx("span",{className:"text-xs ml-1 opacity-75",children:w(s.timestamp)})]}),e.jsx("p",{className:"text-sm",children:s.content}),s.direction==="outbound"&&e.jsx("div",{className:"flex items-center justify-end mt-1",children:F(s.status)})]})},s.id))}),e.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-end space-x-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("textarea",{value:o,onChange:s=>x(s.target.value),onKeyPress:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),N())},placeholder:`Type a ${m} message...`,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 outline-none resize-none"})}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(K,{size:16})}),e.jsx("button",{onClick:N,disabled:!o.trim()||I,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(B,{size:16})})]})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(i,{size:64,className:"mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Select a Contact"}),e.jsx("p",{className:"text-gray-500",children:"Choose a contact from the sidebar to start messaging"})]})})})]})};export{Q as default};
