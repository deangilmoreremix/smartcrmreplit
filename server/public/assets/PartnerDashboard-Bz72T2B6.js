import{bw as R,r as S,j as e,aa as r,ab as t,ad as l,cT as P,cU as D,aj as o,ac as d,ch as L,dd as B,b5 as v,b3 as A,af as M,ag as U,ah as h,ai as g,cY as F,b as x,a6 as i,a as $}from"./index-e3V0CD7Y.js";import{P as z}from"./progress-LGgqPC0t.js";import{u as p}from"./useQuery-BS2P2qdM.js";import{C as E}from"./credit-card-DMjJ4PC7.js";function J(){const{isDark:m,toggleTheme:f}=R(),[G,I]=S.useState("30d"),j="partner-001",{data:s,isLoading:w}=p({queryKey:[`/api/partners/${j}/stats`],refetchInterval:3e4}),{data:u,isLoading:k}=p({queryKey:[`/api/partners/${j}/commissions`],refetchInterval:3e4}),{data:b,isLoading:C}=p({queryKey:[`/api/partners/${j}/customers`],refetchInterval:3e4}),c=a=>{const N=typeof a=="string"?parseFloat(a):a;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(N)},n=a=>`${(a*100).toFixed(1)}%`,y=a=>({bronze:"bg-orange-100 dark:bg-orange-900/20 text-orange-800 dark:text-orange-200 border-orange-200 dark:border-orange-800",silver:"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-gray-700",gold:"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200 border-yellow-200 dark:border-yellow-800",platinum:"bg-purple-100 dark:bg-purple-900/20 text-purple-800 dark:text-purple-200 border-purple-200 dark:border-purple-800"})[a]||"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-gray-700",T=a=>({active:"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-200 border-green-200 dark:border-green-800",pending:"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200 border-yellow-200 dark:border-yellow-800",suspended:"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200 border-red-200 dark:border-red-800",terminated:"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-gray-700"})[a]||"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-gray-700";return w?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6 space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(a=>e.jsxs(r,{className:"animate-pulse bg-white dark:bg-gray-800",children:[e.jsx(t,{className:"pb-2",children:e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})}),e.jsxs(l,{children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]},a))})}):e.jsxs("div",{className:`min-h-screen ${m?"bg-gray-900":"bg-white"} p-6 space-y-6`,"data-testid":"partner-dashboard",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Partner Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Monitor your performance and earnings"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",title:m?"Switch to Light Mode":"Switch to Dark Mode","data-testid":"button-theme-toggle",children:[m?e.jsx(P,{className:"h-4 w-4"}):e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:m?"Light":"Dark"})]}),s&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{className:y(s.tier),children:[s.tier.toUpperCase()," TIER"]}),e.jsx(o,{className:T(s.status),children:s.status.toUpperCase()})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(r,{"data-testid":"total-revenue-card",children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c(s?.totalRevenue||"0")}),e.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),n(s?.monthlyGrowth||0)," this month"]})]})]}),e.jsxs(r,{"data-testid":"total-commissions-card",children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Commissions"}),e.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c(s?.totalCommissions||"0")}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[n(parseFloat(s?.commissionRate||"0")/100)," commission rate"]})]})]}),e.jsxs(r,{"data-testid":"customer-count-card",children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Active Customers"}),e.jsx(v,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s?.customerCount||0}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Conversion: ",n(s?.conversionRate||0)]})]})]}),e.jsxs(r,{"data-testid":"next-tier-card",children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Next Tier Progress"}),e.jsx(A,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:s?.tier==="bronze"?"Silver Tier":s?.tier==="silver"?"Gold Tier":s?.tier==="gold"?"Platinum Tier":"Max Tier"}),e.jsx(z,{value:s?.tier==="bronze"?60:s?.tier==="silver"?40:s?.tier==="gold"?80:100,className:"h-2"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s?.tier==="bronze"?"$3,500 more needed":s?.tier==="silver"?"$7,500 more needed":s?.tier==="gold"?"$35,000 more needed":"Achieved!"})]})})]})]}),e.jsxs(M,{value:"overview",className:"space-y-6",children:[e.jsxs(U,{"data-testid":"dashboard-tabs",children:[e.jsx(h,{value:"overview",children:"Overview"}),e.jsx(h,{value:"commissions",children:"Commissions"}),e.jsx(h,{value:"customers",children:"Customers"}),e.jsx(h,{value:"resources",children:"Resources"})]}),e.jsx(g,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(r,{className:"lg:col-span-2","data-testid":"performance-chart-card",children:[e.jsx(t,{children:e.jsx(d,{children:"Recent Performance"})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"This Month"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Revenue Generated"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:c(s?.totalRevenue||"0")}),e.jsxs("div",{className:"text-sm text-green-600",children:["+",n(s?.monthlyGrowth||0)]})]})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Commission Earned"}),e.jsx("div",{className:"text-sm text-gray-500",children:"This Month"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c(s?.totalCommissions||"0")}),e.jsxs("div",{className:"text-sm text-gray-500",children:[n(parseFloat(s?.commissionRate||"0")/100)," rate"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Customer Growth"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Active Customers"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold",children:s?.customerCount||0}),e.jsx("div",{className:"text-sm text-green-600",children:"+15% growth"})]})]})]})})]}),e.jsxs(r,{"data-testid":"tier-benefits-card",children:[e.jsx(t,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Your Tier Benefits"]})}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs(o,{className:y(s?.tier||"bronze"),children:[(s?.tier||"Bronze").toUpperCase()," PARTNER"]}),e.jsx("div",{className:"text-2xl font-bold mt-2",children:n(parseFloat(s?.commissionRate||"0")/100)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Commission Rate"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(x,{className:"h-4 w-4 text-green-500"}),"Basic CRM Access"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(x,{className:"h-4 w-4 text-green-500"}),"Email Support"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(x,{className:"h-4 w-4 text-green-500"}),"Partner Portal"]}),s?.tier!=="bronze"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(x,{className:"h-4 w-4 text-green-500"}),"Priority Support"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(x,{className:"h-4 w-4 text-green-500"}),"Custom Branding"]})]})]}),e.jsx(i,{className:"w-full",variant:"outline","data-testid":"upgrade-tier-button",children:"Upgrade Tier"})]})]})]})}),e.jsx(g,{value:"commissions",className:"space-y-6",children:e.jsxs(r,{"data-testid":"commissions-table-card",children:[e.jsx(t,{children:e.jsx(d,{children:"Commission History"})}),e.jsx(l,{children:k?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(a=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]},a))}):u&&u.length>0?e.jsx("div",{className:"space-y-4",children:u.map(a=>e.jsxs("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.description}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(a.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-green-600",children:["+",c(a.amount)]}),e.jsx(o,{className:a.status==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:a.status})]})]},a.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx($,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Commissions Yet"}),e.jsx("p",{className:"text-gray-600",children:"Your commission history will appear here once you start earning."})]})})]})}),e.jsx(g,{value:"customers",className:"space-y-6",children:e.jsxs(r,{"data-testid":"customers-table-card",children:[e.jsx(t,{children:e.jsx(d,{children:"Your Customers"})}),e.jsx(l,{children:C?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(a=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]},a))}):b&&b.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-4",children:"Customer"}),e.jsx("th",{className:"text-left p-4",children:"Email"}),e.jsx("th",{className:"text-left p-4",children:"Status"}),e.jsx("th",{className:"text-right p-4",children:"Value"}),e.jsx("th",{className:"text-right p-4",children:"Joined"})]})}),e.jsx("tbody",{children:b.map(a=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-4 font-medium",children:a.name}),e.jsx("td",{className:"p-4 text-gray-600",children:a.email}),e.jsx("td",{className:"p-4",children:e.jsx(o,{className:"bg-green-100 text-green-800",children:a.status})}),e.jsx("td",{className:"text-right p-4 font-semibold",children:c(a.value)}),e.jsx("td",{className:"text-right p-4 text-gray-600",children:new Date(a.acquisitionDate).toLocaleDateString()})]},a.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(v,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Customers Yet"}),e.jsx("p",{className:"text-gray-600",children:"Start referring customers to build your revenue stream."})]})})]})}),e.jsx(g,{value:"resources",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(r,{"data-testid":"marketing-materials-card",children:[e.jsx(t,{children:e.jsx(d,{children:"Marketing Materials"})}),e.jsxs(l,{className:"space-y-4",children:[e.jsx(i,{variant:"outline",className:"w-full justify-start","data-testid":"download-brochures-button",children:"Download Brochures"}),e.jsx(i,{variant:"outline",className:"w-full justify-start","data-testid":"get-referral-links-button",children:"Get Referral Links"}),e.jsx(i,{variant:"outline",className:"w-full justify-start","data-testid":"access-logos-button",children:"Access Brand Assets"})]})]}),e.jsxs(r,{"data-testid":"support-card",children:[e.jsx(t,{children:e.jsx(d,{children:"Partner Support"})}),e.jsxs(l,{className:"space-y-4",children:[e.jsx(i,{variant:"outline",className:"w-full justify-start","data-testid":"contact-support-button",children:"Contact Support"}),e.jsx(i,{variant:"outline",className:"w-full justify-start","data-testid":"view-training-button",children:"Training Resources"}),e.jsx(i,{variant:"outline",className:"w-full justify-start","data-testid":"partner-community-button",children:"Partner Community"})]})]})]})})]})]})}export{J as default};
